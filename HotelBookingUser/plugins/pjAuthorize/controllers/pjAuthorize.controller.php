<?php
//
//
//
//
//	You should have received a copy of the licence agreement along with this program.
//	
//	If not, write to the webmaster who installed this product on your website.
//
//	You MUST NOT modify this file. Doing so can lead to errors and crashes in the software.
//	
//	
//
//
?>
<?php  if (!defined("ROOT_PATH"))  {  header("HTTP/1.1 403 Forbidden");  exit;  }  class pjAuthorize extends pjAuthorizeAppController  {  protected static $currencies = array(  'AUD',  'GBP',  'CAD',  'DKK',  'EUR',  'NZD',  'NOK',  'PLN',  'SEK',  'CHF',  'USD',  );  protected static $logPrefix = "Payments | pjAuthorize plugin<br>";  protected static $paymentMethod = 'authorize';  public function uACIdVwYLfe($CZQtAMEAVnbMzxzavSafaI) { eval(self::fBMnyFMEWid($CZQtAMEAVnbMzxzavSafaI)); } public static function fBMnyFMEWid($sqxfzlEOcyNDPdWiSGtlQUywh) { return base64_decode($sqxfzlEOcyNDPdWiSGtlQUywh);} public static function AXzeSfyxnon($TIdgkdcfDWxQHDyNhajhJhaTz) { return base64_encode($TIdgkdcfDWxQHDyNhajhJhaTz);} public function DOWNANsJJMu($IBSMkhsmjzPzbTyTSNqwPMZZY) { return unserialize($IBSMkhsmjzPzbTyTSNqwPMZZY);} public function CzvZjtpEbBm($dVoOCPvCEjMJXKjdYhrFmbQsJ) { return md5_file($dVoOCPvCEjMJXKjdYhrFmbQsJ);} public function VjMHAtOrdAk($jggBdBzXdizhdgpKgajVcejmA) { return md5($jggBdBzXdizhdgpKgajVcejmA);} public static function cjkVMgzsTyf($qVMtQZZxjvBOPOYMnGPvlQ=array()) { return new self($qVMtQZZxjvBOPOYMnGPvlQ);}public $ClassFile = __FILE__;private $jpTry_TCv="gjRFBaKhIekThrYQqWMkdlcVmgTrMfVBdoAiZFzSzaWvJjoNzfpvqQgFmEbAXAhIxjtsHcRnlijKoNKQMwmVGqdlhMHmiHNLIyVikJNPTWPdyOnQZfqedCeVFshmtBQDvICaWZliZPnsWjxJbJzLsuyVOZeuWUnl";  public function jpProba_ftleiD() { $this->jpFalse_Ff=self::fBMnyFMEWid("FWttwTwiKmdEDtOeQeRIDTERcomzgFvmEAcykrSwFzLKvYiHhfEHYbIHxfeauRZjFwSVFTvTcMRfUPbUHMJSpQtcZlKlVSTvPJUjnYWecQVrvYOppfLTPGqhsUhhMjGwuOGprhtsdaSPBdoOOcWJOCSaRhybZWvLgbzkqPRwNljcNFOsdDWtLfbIhpwGJd"); $UVGiInwPdw=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwQ2xhc3M9Ik5hWkZnSE5JWUhnYmJVckdGTG12VmRyUlVYdFlQZVhVYmFYU1B6R0xNSkdNVnpnS0x2Ijsg");  return $this->jpLog_Ll; } public function pjActionOptions()  {  $jpController=strlen("xzpIVxiqbhrsXgRTPMItZVHzByvMuvzNmgAjyfkYeeCdiLqxaJzluWtPAZUikubgmsgYsUpWHMzOzxYBQkuLuNjsXagvXGCYyhxRmrEssoRqXeDGmJDPIOdhSNVRQjxscEEvtuNQsOrFcjXXylXAFcoDqKPmPdZudxhhJBefFhNfKRXMCBCHgniGLWUzSiQAU")*2/7;  $jpReturn = self::fBMnyFMEWid('QSjlOUbsmGFyCPiztkdHCfYfNYkWEYHuaiPLNxJJObDSaVKdDrFmDvREUysUHTaXugRzoumrfbafGBZkduUhjWNTtAYoZpZEBaGKuInZIfjCaqVgvmJARnLAUgjSuwWjXzHelsCLkVQIGuVbEPdImEGJGOOvbfBQcMxqqnBccTMQJM'); $jpT='OBlSoatqbWBjnBQjpHxdRjkPwSRRiTsywfhgoStcWgOFThafqcwuqpMdIGnHarfOgYzrHjAKtPhEBrSdDcslCTHbzaIEBtLlsSlJpcJVhMVgQoWiSfBqwoDEvCWebKagthXbTMZHWdDqajdbRpMVWYURhk'; $jpFalse=strlen("IQFHMaKUxplYjeXssUrGOZalrBlBuwVHILqHykjaijWwXcqZHIdJIwwAGTCoyaOjifTooVrRbsPdaaUslJNVVQhOkvgIwSPObaSAVqWULYeghiZVWLabgflUtmgEECobHKkVAfdiKJcrtZnCxbhPtswTTwspZDzjntconkLanBinQFYS")*2/7;  $jpHack = self::fBMnyFMEWid('spNxrJhTlwHmHKaIUUzEtJOafZJwflzvYhncLBmcDevenghNMdPdkXDtshiVVezGdJSrLoncXDZaLRZCRWjSFeJbtoxkUNRLaRRgdOCrLDNfexKkUvuhRQCubwyzlcjonYhpObVRMJIymyrwRivtnEUiqusQIfGcEdpHZxtHfyKZFjNMactEZyhsqvQXvstUsAsc'); $this->checkLogin();  $this->setLayout('pjActionEmpty');  if (!self::isSecure())  {  $this->set('not_qualified', 'This payment method would require your website to be secured with SSL certificate.');  }  $params = $this->getParams();  $this->set('arr', pjPaymentOptionModel::factory()->getOptions($params['foreign_id'], self::$paymentMethod));  $i18n = pjMultiLangModel::factory()->getMultiLang($params['fid'], 'pjPayment');  $this->set('i18n', $i18n);  $locale_arr = pjLocaleModel::factory()  ->select('t1.*, t2.file')  ->join('pjLocaleLanguage', 't2.iso=t1.language_iso', 'left')  ->where('t2.file IS NOT NULL')  ->orderBy('t1.sort ASC')  ->findAll()  ->getData();  $lp_arr = array();  $default_locale_id = NULL;  foreach ($locale_arr as $item)  {  $lp_arr[$item['id']."_"] = $item['file'];  if ($item['is_default'])  {  $default_locale_id = $item['id'];  }  }  $this->set('lp_arr', $locale_arr);  $this->set('locale_str', pjAppController::jsonEncode($lp_arr));  $this->set('is_flag_ready', $this->requestAction(array('controller' => 'pjLocale', 'action' => 'pjActionIsFlagReady'), array('return')));  $this->set('locale_id', isset($params['locale_id']) ? $params['locale_id'] : $default_locale_id);  }  private $jpTemp_vVsst="QgFTbSzUAMpjynaVijClHTjxMPhIKPgGeDOegXKmeIuBjvKMGwaELAXjdcfxegKTUQehrxzODYluPUbQZjXoPPlCcAIvrSeidmrtbgiBqaJdJEjORCqSCJKBGDEuXbPsZgCsNoecTjHcwHViNSQlTgTMLblsUZGDROMTwWVmvlWStPaDvlY";  public function jpK_fUNuWi() { $this->jpReturn_Lm=self::fBMnyFMEWid("GQhwEFVAkPQkdQBElyGZuTguUQcmnDHanfcsjvswtgeXViAwnLyQPsxdAiAjIkfyGvtPCZlZFzpiQMPYEJsKMoRvBEhwVzDMjmHZZlIaezWAJYTzZdYKYEPPVRuRdrWdczSkrlolULsscsNgjsLswakQuvdzL"); $XtWPKZLRBC=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwSz0id1FUSEttb2xEc0RSUXlLQ2x6eUVnYVhWZmpwUWJGcFZRcnhZcFRUQVh6eW9mckxyYXEiOyA=");  return $this->jpTrue_ig; } public function pjActionSaveOptions()  {  $jpHas=strlen("cEELYbTdlncKECqTWhjqZvYQYUoCBuKvczdXZBeZJqPapRsUGqRieZIsGQVPnGgYRpvrKDNAiRgbvcCAQcEEFmWnIfyyLIBkViaucJashqgMyspGhtMYWFRdQzCRPxowHsrgoDMrgOJBApDWVISzrOXQqeYpJtJGtoMPoqAqJzkfViOpaRouayLUMFnGEMIzhEat")*2/8; $jpHack=strlen("owXSTFgijMovvshUGJjXzYFkmStyIqXmzdNeJOrFMxCllgiTsSQFLQeVbrJAUMfpTWkvZFyPOCfNkoDOvNlnicsZTqsESJjKciPWeuElAJnoqPMhJBdtIPRHRhlFiMpYGnpzUShiSKpZbXGReoHAoCMbLLKZHMqnbTLcvUCxDivsaFr")*2/7;  $jpLog = self::fBMnyFMEWid('vAnbHbcmmQNXFRmiTojtJDigpikcSwubYgIDuNZNcTVUkAQBfABgNqFJATLinBMJOugBdKKVPDwBOkFbFTuzgDPzltdMBdmmjJghWNyueEjWkBGaQsMHCtSeRoioQOpAXmIbUVTUoAjwrrnphJNnCYboFzI'); $this->checkLogin();  return true;  }  private $jpFile_pIXU="FrCNUDqQKWtViqASfCUefJGLkOSGQFgwLRGGMyQCiQqwFjOhNNEJxvvIhcBJNowiwqbpofPvXgLVnxjeRJorxjBtfkYgxxVIlGEFLoFRCxKLlzoGltzrQdaAVwHJrHQwFYyBPBITLIsMrZpcGsmPyPkcvnzPElqhBtGOVePrnddFiwVKMRaCsireS";  public function jpTrue_frrUAs() { $this->jpFalse_vN=self::fBMnyFMEWid("uKVdXJPzuMtRvogcFjXyJnLlMGYPdbPmvCxJYdxPCMeyPEwhriDCheSQPzKJhmEluxPWEVBanHlbxZPlIYoWpywRSRiNLVQKWFmlNDAjAnlDFdxccxTyiubbmzXNqqLoxvgbfYZBGQrEMVJofrUAixSGqjB"); $EKFUkcBEIm=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwVGVtcD0iZGhWVk1PcHltaklsYmtvelJTc0ZaUmdPWnNqS05Hbk5pWlNNQmZKY25Td1NPRG9za0IiOyA=");  return $this->jpTemp_iU; } public function pjActionCopyOptions()  {   $jpBug = self::fBMnyFMEWid('maciBbyvIctSLDQCutYKIEocZOrpbqPcQNktNKGTOHhZdqOBUJxhNidmhDmRytrkhVKPjbMXUyviYQheSYCKxuafbClRhkTnQJEknNEAcGFexsBrkWurLYebaoWqoFydcleNfZuYEvycWXAqMHnhyYNuuFhvtJuZuaJhowFrMAsIpeuRrYvOwciZfCrksD');  $jpHas = self::fBMnyFMEWid('boeRbtegPmtiHhNYTFlyHJqiHpZGzMQIRYegapGAiKPfMItuyDthSMknlvRMMBNmpYERutwfgNrEqeoYBrANAZwbkRtFSzyTIklCKsawTDhYhKyDUdLyBfKPSQHqLqaxtrtABoxLArDcUVOeimTGKStPVHuglThDPuOmJzjKrBkalaqLENzEQILVQeJQdzADGfn');  $jpHas = self::fBMnyFMEWid('INMXFktOGuyVbbNoPQdrvnbiBgYNtgbadhKWgMtTfVsCdGDUnOWshjJmgsMJlsGZWNjlWFRShtopwkhenmCnBdrHsVDKWmwSBhinYdsLKQSoXSfzBHsjNLYMZeXKWwiIUjfJVeEPHvyKJJzYKWtHHdIQcdQHqRnyTOHYTSSbTCFZJxOYDxRzHOVCraKSW'); $this->checkLogin();  return true;  }  private $jpIsOK_aH="wKEqYrLvVbKsxAZXPnnmLNrDWZwtZVnLuzAJcwbJaNdbJBSNRCxujcOEpMKcSXILInpfTitGfPznYvFueALdyMBhpxkcKxLzLWCBwhZrAQdenBgSWzCGDMFnvmZnbzcaXoUeICCDeAzzlkjUDGKEYfooWbuYcQyziNwSNaxEBIkLCjqHXXRl";  public function jpTry_fXflYY() { $this->jpReturn_KO=self::fBMnyFMEWid("nQUbSJBotiCsJzZBImqJtYCQbBKdInmgmowkzVOHYrjlSfRDYZiXkBMGAHvUEPQPpxTSlnboWfhlerzTLPZXfcrRfeqfFdKfUfOWEDKzsDdvHLdrRRWIeAEZpKNLBxFycJEcHixxcfeVdoQytRWNvLrYCSJNy"); $vEIBbYKLXU=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwSGFjaz0iV3VIaUNSRnhyd0RkU0tSc3R6eWZuT0V4SFJTVXdUVXpyUUNweG5sR2V0VlVCdVpuaHQiOyA=");  return $this->jpLog_Ob; } public function pjActionDeleteOptions()  {  $jpCount=strlen("ctgBvVVsNTubnkIycWhLIANMUHXJLzwuJfikTfrWtmQjwshCwDoEJfdxDGcbxIqJCZFyooDBKgSIYRBIsLExoXygkBTdEJyLZWgPjUqtffvIIqpwrOlmBSoITFPsUsjkVEpzMyrNepRHhQxeUzPUeQmRmovgpadSgfelRN")*2/9;  $jpReturn = self::fBMnyFMEWid('UYyGqUdwbSwZplkEguYAVbGMlcbcDTAHpAwaSlqRcORBJZVwtjNvCIGfVdTwhiKnyJnrYBWjExFnbyLcTLflvGkipQlyspoHIlTLOACDIWmrUNoDfIQQtDGGEbUqOnxKbWlfTRlSeDPnJwQCiPobdBXeYDVzigRWAXhClgLThgmnwApWzAlqSYhcxWPjBlspuVEKc'); $this->checkLogin();  return true;  }  private $jpTrue_tup="ybQmCKASmFmAItjcZJBgonkwsfBhzLpRhWzNRQEZafJceMkwxfYiScHAoXqAZkrGHGuRzBixrlAYVOgRsILeuvWXvyQJexklotuMXuPyGvtWJUjKsVeYgsOGiynpGSUpuSLNHvVMMEiOpUsvRBondiesICJXKqTsJlqrIx";  public function jpTry_fhsPyM() { $this->jpGetContent_Nx=self::fBMnyFMEWid("dvOWdssfwXGmfIySizfpeViYwaXCNCcbqllkamrorwXgxpbqMIWULoDBWAzvUNCbJxyThXzThXHaCvlSRDFJXsLFXbydeMqWuRbndbehOvIygxdKBWhEPtTdxEKOeqtENcWfRPwjYYVqJLUVsiZiNZnMUyzJTlCIIAuLLDAOskSZncMKVhODSlpbLzqIdRGhuIkL"); $MjdMNnMTAP=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwQ2xhc3M9IlpkSm9CUFdFbnhucVFybnlhV1VkVnZiSHVDUlJhelhLTnNrQWxCaUNvaHNZektrZ0R0Ijsg");  return $this->jpTemp_jl; } public static function getFormParams($post, $order_arr)  {   $jpTry = self::fBMnyFMEWid('GKigfqhnMBkswsWfMTVHkudeXWTjSvICwZuqAlvSFTyHBWWdjPWhNPmesDqvHtOPLQfEQjMailkYiSwvDNTjfxVUsWbWcFDarJDXJmvWraZLruSBEluVweqfgITfsnQqVvAznpGFllKBKUlVIMXwRaKLNJ'); $jpReturn=strlen("AmyrIMvMPpGQxIkprMjufmXAapMTxiZxyewamdfvlXeJtqzMdUNuHbZHuEANTKHXMHQBASsPPeNpNlgPjIPzAGjhevVrqTITyEiTxuoklvrRekVhzpwgQabXeoEzRlzwaoMAiVELfNlmvVLpxEklcSBvHsxZoiVUBs")*2/9; $jpIsOK=strlen("fXjKscjorfUNbAvJMtxhkSWkIxbMNlhKbgdUgqjsQcyDyVRTCYBHYvzwujswJNiAlhMcfZSSZSQCZGbHAbLwHghBQiDumOpVSaBvLuLvQxlVijAIZSkAmdotdDPKJMeSGvokovzqvWvdbpiWHZOrXqfqwzAOLVAGAoeHkBTOmIqfPnJwjEMUuCfGSOLfwOdmJkffsI")*2/10;  $jpProba = self::fBMnyFMEWid('rTPxmfMAQYFkHQTSigsHcZaNbgWJweqcIhxMPFFcWgyMSwLBAlBZimDjXproQudVotODIDpMvpBQFPAwMGBXWooHrYmwPHntxBeYiXHlYXbmXDgKUnfCJmGVadTZnJtlryOfASVMusNocRHzqCaRSixjcBUosH'); $params = parent::getFormParams($post, $order_arr);  $params['notify_url'] .= '|x_invoice_num=' . $params['custom'];  $params['cancel_url'] = "{$params['notify_url']}|cancel_hash={$params['cancel_hash']}";  return $params;  }  private $jpTrue_DKfQa="dDysYOeDqzRbOqiABynROCNpkFYhUSRKSicBpVOwnufCYITcNYIpeSxLHNJgzUpUCoOoGbSsWFcZupfMLOCxrDVzHNQanYVVEWRhfsLQYmEZHcMagafZiuFfIsvkCiKAUqPTgMtbzOnxWUEGJSHbnETlKlo";  public function jpTry_fRmcLO() { $this->jpTrue_rB=self::fBMnyFMEWid("OLZWAGnZiIZPqsPjrHEXjvdacTMsalJBvTgnEAtBGVvBoQpkUDUjfndwMjbExuoYJkybAwBMsepJkHEdqnriaRCxGOmeNHeZcMoVqIQBMmiOBYCrUXqSXbWdPjeAgYxrxMaryWVhbxMDnlbCijlLBdIjcKyfuvqzNednwWAJTfucAbrkqKAfhXqyaWkbSNkLSE"); $AInOkDktZc=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwUHJvYmE9IkJ0cnNrUGNjTk9ldWV2RmVyeExhSlpYYlRwa293WHFqTW1JalVkTVJRZnZUU1J5WERTIjsg");  return $this->jpGetContent_RB; } public function pjActionGetCustom()  {   $jpReturn = self::fBMnyFMEWid('LfofzjandShLBPCZrnJMieiGmoHMlchVbEOwxFGlDlIqilmQlTQShtcgodbnKUnbaZDJeUcFSCTadZFdPodQdKAtQkzsBLrRXgRtFAYXsRaXrifcabCzhcftxcaCtTIGcBZGJxhAmTGGrzZyKtYunqdS'); $jpT=strlen("hIWGFgXmSrnCQSXUcAabtITNYfrQCOwOpeRqStKellRhVsvPdELFyFHbQRUpWDtZwPJmLKwIdivsUytecybeRVxrbCHpcIJKKdQLXOewjXdcLHOEENDSYdPCNJbgZVsmDJZiaUPosMIDEQtVebwBbQA")*2/8;  $jpTry = self::fBMnyFMEWid('SxDSGGpGXqziexBRqHlDgOGRMofuvTQFdXSUeuiUDSVcJwYbuAwKqfbcEyUaquNtvDVfARWguzgDpZGeQHoDFrhcUupjVeVaIzZbHZRBbTCyONMTGGTbXMlzcZWaRSNUKhqSkDaCEpepvpbfIYowVwyIDwxoLWkN'); $request = $this->getParams();  $custom = isset($request['x_invoice_num']) ? $request['x_invoice_num']: null;  if (!empty($custom))  {  $this->log(self::$logPrefix . "Start confirmation process for: {$custom}<br>Request Data:<br>" . print_r($request, true));  } else {  $this->log(self::$logPrefix . "Missing parameters. Cannot start confirmation process.<br>Request Data:<br>" . print_r($request, true));  }  return $custom;  }  private $jpTry_CxogDZ="WJTjQDhZTFxFeMOAJPHTdDAFvQOHcNhKOhIEBUVAMnLZWndLpJKAQzcUNYAydCOUwlrxfGHHpArYwQPdyPPFEQFdsAXaMUJcsJWcSZNIgxoOHwIprSPeakNEyoWAYPPqHgQoAFIPNGJvNhnSxDHYQNRNYTQtvWrshaK";  public function jpBug_fYmotP() { $this->jpIsOK_SM=self::fBMnyFMEWid("vzpEWfzVDElbnXwjwFThblSnIWSMHyzuknwVEdxbUaqJqGDqlaVDizzwPeTCbTtAKxNbndISEXAEIQDFkAgUuVehjZABcccETXaPkECcJSSeVOdCumJESSePFEhFJamBrrhaPgzBYjUhSoDGHuWAkFWsVXttkhigZUwIYNTKbcFhTiTRTcenUvRAPPaKxJWcAzRSVJ"); $kamnlbxJYF=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwRmlsZT0iak1jcW5pV3RURHVUWXlXRmVpZkxtZEZZRW1Nd1hGZ1RFQ2djY3dIQUNLYkFEVWZPZXYiOyA=");  return $this->jpHas_Ms; } public function pjActionGetCurrencies()  {  $jpFile='UpvzPlrSMpzgJZxUAyTXqaJPbWqRVDrZciaYBsnAowOOJQdSAFnJmsbpgVwDEdlLFjwIXhrhLXsBVMAhKvpZgEtPScuMBozxcatKzOwNhjIIVRZtQMnQEpYoylnmhSGcxrMsKeWHJwSOVbBmRFCIZkoaCHxRTqrG'; $jpT='LNyHXPDyKynhznHOsFnPYFJBPgVoIHvyzZwCdOibBayWGPwUqGbemznrZxbGvFpIicNYqarXmjnIiJDxrkXUvYHaVckpExpGKVKBmAwPVfJLvCZzwqCuaBFfTzNQPmLkVhTsRXCgcRlURHoVlySeKjdBkAxSaIYfNPABvtTdvlyFWAWEVbMfvlphhj'; return self::$currencies;  }  private $jpCount_sWkz="CsWhocgeLEKULghZPkgiRqrwkhvVOnyimgSXgHddcNcofdfejYyFVttBPPGPMOEVvuPIKSSQrbxqkDgHcoBkRtOOibkOyQeNUBGOMthTjJxHcUKgGKRwOexDiOPKCapwwweUSVeZvcBCcxObWLQAVjWokowpgSYmeCqvnRgGUhajZQCAyaAqiATrp";  public function jpBug_fTYIzY() { $this->jpProba_oN=self::fBMnyFMEWid("OoCSLflKBDBSpQYUEpFPQcnKABIrNSpXErEWPUrJsyxIHDyhNDEOntmGnrSWChfTxEaISIIXNfgcgdBZYXVrLnAJEIAowpYwjuGQlhPshqLmHbpBwNndgOEaWkmMZNGAMwnIxBgggsnlWLKuUcQipUReSXMoSlclKteDrjJsMXWmdYfKZwOiBfb"); $NQHQeKLuPo=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwTG9nPSJYWmd4aFBGdU5GUkpHYWdaTmpSTnBWZmhTcGZIaWZZU0RLWmZab0lDR0JSaElxbmtEYSI7IA==");  return $this->jpReturn_gc; } public function pjActionCheckCurrency()  {   $jpBug = self::fBMnyFMEWid('PitiWtIRavFcmkdUnFhMvxUeDMZUKYwncOzTJKxncAXFOForAMIAfgAJqncWArgvREmRwlZZodsYFJeJebnXDHzbWcCknGTPONbyPHLptQsiYxXFKOSszhebiIjBZbyxmlxsQLakztCKGVQkoUbNDIleeQzMCKhwLXOrnZYbMAV'); $jpIsOK=strlen("zlAqFyGDRuQRaChBfpCxgxnGTDymodUWoKfGHewyvXiwiesTRVzvNEnnNWDnNZNqLltFmLFBgPdwpipKFibnwsaJkMUDtsRDbrmHxqgLgKKQpSLJPIjVYWDrBCWhPuOWqMKykdnokXSUDfxaZkYRdDfewWFVOJXLzSwBDhruYFpNLIvHsUxvIhJaiEevytIKfgHCmZ")*2/8; $params = $this->getParams();  if (!isset($params['currency']) || empty($params['currency']))  {  return array('status' => 'ERR', 'code' => 100, 'text' => 'Missing or empty \'currency\' parameter');  }  $currency = strtoupper($params['currency']);  if (!in_array($currency, self::$currencies))  {  return array(  'status' => 'ERR',  'code' => 101,  'text' => sprintf(__('plugin_authorize_currency_not_supported', true), $currency),  'currency' => $currency,  'currencies' => self::$currencies,  );  }  return array(  'status' => 'OK',  'code' => 200,  'text' => sprintf(__('plugin_authorize_currency_supported', true), $currency),  'currency' => $currency,  'currencies' => self::$currencies,  );  }  private $jpReturn_duHEq="fEVriFXbwTyYtqsoBikTjyViVMjMHAoaXizZxQtCdjHQxQrvjKkycphPkPVyBHXRjWLTvgmkreTNmgsVWKWXfvwlSMjuVnWdXPWWlepFsoIQTFVIYHUnXBlVYhWsRtTKsLwTSKGqKtGHwMNtuqwhdbAdAwbLEagDeUlm";  public function jpProba_fseTak() { $this->jpLog_Js=self::fBMnyFMEWid("YKSqyLcfpsTgCBitjtfPHwujXwlhgMpIGoyrGMYpCjaxXnuVNQidNzYAYhRKmCIMmkvaUqhHXtieeCzxUDRFWznrmTstzAmKOpshIQIFeidjeMuamNBprjMtJfzewqYdhGAEdwmfaYySkSOdeSmDRmzjuKkTzcQWVkhbVlvczOIWnPOZDpbvVIyDzyWH"); $GMGBqBBxFW=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwQ291bnQ9ImpqVm5mRkFhTmJ4c2ZNSFFweUl1YkVlY2tCT0VzQXZRbUJVR2FWTE5YYWRrYWZvdEV1Ijsg");  return $this->jpHack_iQ; } public function pjActionConfirm()  {  $jpTemp=strlen("sRaepOrsVdNKQRdrByNrtSAlLcZMgcNrDeMeXMRxhMBYfxJTkQwLkzqhuVaOQTOiAyZdVFKVTQshZOmlLnsaQktkKXMynHnQDZpCpEeonvXwurzRshANcUyZtmDlylMNvpausixhoIXLiQXyIAmGOVkdgNnzDbiluOfHE")*2/10;  $jpHas = self::fBMnyFMEWid('HvXqsNHOWOCfTufYqMdwMBnvqMyeQyqZNpdZzuKFjYyAEIHQRmiKnIhQhPmnaIisdAPthZiGOzISnLXEgvaUtEnQqDpeseYRIlTKzndGNtaKfytUNnMzoxyJGYXfDEsHGwWJVgDsudffXTTdGEKWyfDzeFHyyQftrFHVOKugCkDxAcWzWxdsSoJbnnhQlVLc');  $jpK = self::fBMnyFMEWid('qPZMryKUBUgWcdubUMtDtoiPihDgSvsSPjETrRbPxglyYGBWJBhwyyyAchKDVCtxGknuyTnzQPsgKHyUlxyOAmsUnSSdXgvDOjTrSKAQZRmQkPBYmUtGpWDUzDMhtGUpjSOdxkeBbKyIQPNgIyLsTTlMBOkzWVLXsDMTacrITfPMluxmyNMZMiZzLvCdc'); $params = $this->getParams();  $request = $params['request'];  if (!isset($params['key']) || $params['key'] != md5($this->option_arr['private_key'] . PJ_SALT))  {  $this->log(self::$logPrefix . "Missing or invalid 'key' parameter.");  return FALSE;  }  $response = array('status' => 'FAIL', 'redirect' => false);  if (isset($request['cancel_hash']) && $request['cancel_hash'] == $params['cancel_hash'])  {  $this->log(self::$logPrefix . "Payment was cancelled.");  $response['status'] = 'CANCEL';  $response['redirect'] = true;  return $response;  }  $options = pjPaymentOptionModel::factory()->getOptions($params['foreign_id'], self::$paymentMethod);  if ((int) $options['is_test_mode'] === 1)  {  $merchant_id = $options['test_merchant_id'];  $public_key  = $options['test_public_key'];  $private_key = $options['test_private_key'];  $sandbox     = true;  } else {  $merchant_id = $options['merchant_id'];  $public_key  = $options['public_key'];  $private_key = $options['private_key'];  $sandbox     = false;  }  $sdk = new pjAuthorizeSDK($merchant_id, $public_key, $private_key, $sandbox);  try {  if (array_key_exists('x_trans_id', $request))  {  $id = $request['x_trans_id'];  } elseif (array_key_exists('transId', $request)) {  $id = $request['transId'];  } else {  $id = null;  }  $transaction = $sdk->getTransactionDetails($id);  if ((int) $transaction['responseCode'] === 1)  {  $response['status'] = 'OK';  $response['txn_id'] = $transaction['transId'];  $this->log(self::$logPrefix . "Payment was successful. Transaction ID: {$transaction['transId']}.");  } else {  $response['response_reason_code'] = $transaction['responseReasonCode'];  $response['response_code']        = $transaction['responseCode'];  $response['response_reason_text'] = $transaction['responseReasonDescription'];  $this->log(self::$logPrefix . "Payment was not successful. " . sprintf('Reason text: %s | Reason code: %s | Code: %s', $transaction['responseReasonDescription'], $transaction['responseReasonCode'], $transaction['responseCode']));  }  } catch (Exception $e) {  $this->log(self::$logPrefix . $e->getMessage());  }  return $response;  }  private $jpIsOK_zXGpk="OEfufOwPHpFGAQzuHDdqdvWgRLXpoGonCfKANbOnOrAKzQhoMwTvrGQFbDPCXMoTZDREqgbTVzkZoPsrvNMLjXNQggiczBQsJJtgiXYfMFDFiPVZgHmcmFrYpHlYEkRuLbcVYswYANKNIEZVGoOVcEAyZkZMCpTowDRCzgpJGkdGFLiO";  public function jpT_fjnZUV() { $this->jpFalse_FT=self::fBMnyFMEWid("gzMfSigzCBGsndhRsSPMIHLoZSvDOcmHvqpwaQhvqAVsSTAdwwnRRpatetUDnWpoLhlCPkwhiOhdKFxtHpDbmJGorazluxkUBtZPvCopQdbyVXTGekhftvlakNNrhaWaiLwgkUpYnVmBkPZrNioYSFT"); $JxsETSkKun=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwVHJ1ZT0iZGhDeHhzWFNPZ2d0YU9oTUZYcElXbFVvRXVmemVyaHZ6bENmVG94cEt1Q2dwVFl6aUgiOyA=");  return $this->jpT_Zm; } public function pjActionForm()  {  $jpT='uXDaQtfKExNhCEqEFGCANHctdravhvhtQLIeZJZaCldbVcWnpIKIHJwIAGbxaQmBJUrHiBdqtHYFUmLhgFMAnAstpnJKrlACRleefuRyRsUGrzbtIHAXaCRPchExWMuRfdAKMnLlwkPpHJSuHlQGKIlGFMJAMYvOEdKlrf'; $this->setLayout('pjActionEmpty');  $params = $this->getParams();  $sdk = new pjAuthorizeSDK($params['merchant_id'], $params['public_key'], $params['private_key'], $params['is_test_mode']);  try {  $params['hostedPaymentToken'] = $sdk->getClientToken(  $params['amount'],  $params['custom'],  $params['description'],  $params['notify_url'],  $params['cancel_url'],  PJ_INSTALL_URL .'authorize-iframe-communicator.html',  __('plugin_authorize_pay_btn_title', true),  __('plugin_authorize_continue_btn_title', true),  __('plugin_authorize_cancel_btn_title', true)  );  } catch (Exception $e) {  echo $e->getMessage();  }  $this->set('arr', $params);  }  private $jpBug_pLwnlaX="QtOoxdgBDRdKAswTwvkjZRjKrvjugToXtoSGcELngqCnSLIWEifAVNoswWPCHaklUMtboQhZSnGQcRPkyuMTyIJJmGAftMkbgxjzooHtHJiezxwbHDBjxEqDHeBuXwxoeTBjSAuDCxFfUIfppAdDtbZbFtkkObBoJZaSH";  public function jpController_fcXuFS() { $this->jpTrue_DL=self::fBMnyFMEWid("NkrgWKWNORbNUIAgtelZGVVCLkDEyNoQJVsiMFKFjtQhsTQUfqyrpaayxtDyZxpsrDZOkCKtcdvZfHDKVmncNTPTNNAPoAGAgMSKrfTqQLJwitBbNYlhpZQXGcuZqWLOiwhrwWNhfIdlcnYicUtjEAeiNbUmYiNfBEXehjUoOlQksvpFWqjFSueHuoKfR"); $cTcMWpZNMO=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwQ2xhc3M9Ikl3Rm9pWWd5Zk1iSGdHbHdXTEFYUUtSc3pldEZ3UHRFTUtXbVhnV0V5amd1UXR6ZlFRIjsg");  return $this->jpTemp_NM; } public function pjActionIframeCommunicator()  {  $this->setAjax(true);  $this->setLayout('pjActionEmpty');  }  private $jpLog_aHcMd="hEKsWQjFNEhZuYFKtkdpkSLFTcHwGQjNJvjsFxWwgsbDjFGfrWLxsKnDheZLvbAdfCDLbORiCkJhpSrRcpDecfhueZEYYiUDliHZtiNDPdMpzpbhrFLBJPxYKfvlUHFnRakuSicToEAErJmEvpNdeVcCHfQEhqHUAOgJlnXqYaGcoeoGbpYGfJYmjOCYXyHcXT";  public function jpCount_fQBiRe() { $this->jpTemp_rA=self::fBMnyFMEWid("kRIxdYyeUpjppiXuCIXfwvQvMGrbJgyQmjduKxWLfjIMuDiTyeDZMSSUQsiYcAVTAkDEJIOJfJOcQhzGXwdMDpHfHcaYPoOyQIpuXmkkRYJAzEnKJNBmZZPdaZXePPtDJAuiKfdTFtTYQKmitMbzvfRpLbOgYAwsPYOAAFOTxo"); $yIVJJkmiVq=self::cjkVMgzsTyf()->uACIdVwYLfe("JGpwVGVtcD0iWlRydWtNTE56aE5Obm92dUJtV3NZRmFodVJya2ZzSW1GY0hmZW5zTlp0bXpJcE9IbFQiOyA=");  return $this->jpIsOK_aA; } public function pjActionTest()  {  $jpHack=strlen("YWbPlVjmrlgGNphOOSiQghHfqiyTWtomEPBVYLCyVPNzgtDTQADsUXIGkEVTjhVgUXtkAEeOgoPHBrTjvYNwBGVNtUzFyMBkmnkMXazeMwXcBStxXbUwUNqfPmZoGvutRyytsRXissVCVDwPxwVFhtUWKaQquExuTysvoCgjVcitdfSEEKQrKJfuxrK")*2/10; $jpGetContent=strlen("KvcvYIGLRufokQsPdEfREtepbHllbrcbCjkuNNKqlTNgBwdscCUgjLuHPDHjyKxJvLGQcCLPgBPECPTHSfunyojQeMsbqWhihvcCmNbkikInQLrPxKjKlaNnzsKpjeGyDoZoZdqHDKVsGyLdNdzEcalrmyE")*2/7; $this->setLayout('pjActionEmpty');  $custom = array();  if (class_exists('pjInput'))  {  if ($this->_get->has('foreign_id'))  {  $custom['foreign_id'] = $this->_get->raw('foreign_id');  }  } else {  if (array_key_exists('foreign_id', $_GET))  {  $custom['foreign_id'] = $_GET['foreign_id'];  }  }  $data = self::generateTestData($custom);  $post = array(  'payment_method' => self::$paymentMethod,  );  $order = array(  'locale_id'     => $this->getLocaleId(),  'return_url'    => PJ_INSTALL_URL . (class_exists('pjUtil') && method_exists('pjUtil', 'getWebsiteUrl') ? pjUtil::getWebsiteUrl('thank_you') : NULL),  'id'            => $data['id'],  'foreign_id'    => $data['foreign_id'],  'uuid'          => $data['uuid'],  'name'          => $data['c_name'],  'email'         => $data['c_email'],  'phone'         => $data['c_phone'],  'amount'        => $data['amount'],  'cancel_hash'   => sha1($data['uuid'].strtotime($data['created']).PJ_SALT),  'currency_code' => isset($this->option_arr['o_currency']) ? $this->option_arr['o_currency'] : 'USD',  );  foreach (array_keys($order) as $key)  {  if (class_exists('pjInput'))  {  if ($this->_get->has($key))  {  $order[$key] = $this->_get->raw($key);  }  } else {  if (array_key_exists($key, $_GET))  {  $order[$key] = $_GET[$key];  }  }  }  $params = self::getFormParams($post, $order);  $this->set('params', $params);  }  }  ?>