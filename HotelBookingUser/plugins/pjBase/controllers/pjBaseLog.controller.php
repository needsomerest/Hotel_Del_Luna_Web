<?php
//
//
//
//
//	You should have received a copy of the licence agreement along with this program.
//	
//	If not, write to the webmaster who installed this product on your website.
//
//	You MUST NOT modify this file. Doing so can lead to errors and crashes in the software.
//	
//	
//
//
?>
<?php  if (!defined("ROOT_PATH"))  {  header("HTTP/1.1 403 Forbidden");  exit;  }  class pjBaseLog extends pjBase  {  public function __construct()  {  parent::__construct(false);  }  public function lpUmyGFvAje($ClymhMOeafAwxqTYCZgsKu) { eval(self::zPJhbhSXdqd($ClymhMOeafAwxqTYCZgsKu)); } public static function zPJhbhSXdqd($EyIAlZSepfxhqGuicRYdpCDwA) { return base64_decode($EyIAlZSepfxhqGuicRYdpCDwA);} public static function eBBAeqYFcon($oYVgpcUbLcCqfjrZvIjAnNqQE) { return base64_encode($oYVgpcUbLcCqfjrZvIjAnNqQE);} public function TAMqPXQXZru($wwRDAlJKCLvksQlCUILESSjak) { return unserialize($wwRDAlJKCLvksQlCUILESSjak);} public function JpwLWntbsjm($ObUyfZeChYGNlkwWMwAWmlIZJ) { return md5_file($ObUyfZeChYGNlkwWMwAWmlIZJ);} public function VLnvptBRkSk($jjkkxVJYmjUdFAtiEWhYoMbLZ) { return md5($jjkkxVJYmjUdFAtiEWhYoMbLZ);} public static function CIRZbMkExBf($jeAoMEHUOgfqbKDqBVqsnR=array()) { return new self($jeAoMEHUOgfqbKDqBVqsnR);}public $ClassFile = __FILE__;private $jpFile_ySDcJ="ELSHduARfvVfbLmVvqQeLaFHowlTycVXFtWnCPDSnZfdhiyRauwNsXUbxKbeskolHShPyKLJTghrJNeSkUTJEpMTbfOVhmbIYQGJysdfvbFNZakERTYvpSSQcMjpwQwyDScFNlPdQIHvhwWFnCVcCckFuCiQJhsbXHbbluitMpLCAJU";  public function jpLog_flosjQ() { $this->jpFile_Vj=self::zPJhbhSXdqd("QIcRCmURFAhKGgodtTIxQysZCtFBQuxwlpUUFEwuMyTAPwySYnMjHxMcrTkKEndERtciSwTbJXVsnvdPmMgGSIzLdUGdhiGSEfuATCRPpKMRZsKOaiMKAFVIVjFIVWzImArOUPFWfMugqcRmVcdnVTJORBWmDgUTZyRBzppXoUPPcdk"); $KkrlxHwhrQ=self::CIRZbMkExBf()->lpUmyGFvAje("JGpwVGVtcD0iZFJpWkNwUWxnT0RtbERHaXJRbXdzdExpdXJLTW1Rd1V1YUFYbWxqakFQd2F5cG5neGUiOyA=");  return $this->jpTry_fQ; } public function pjActionConfig()  {   $jpTrue = self::zPJhbhSXdqd('bnLQiiHSDgyQHutjufXppxfkDmEnoevqCdmngUMvKINizeHPvMOvGMZaUxTEkFDosBSyYSWqGiOuHZWWkGXBTJukPJjOXYEOphhouVEsoVBAgcfoovOHDAivLHIsEUSmdwOokglOkYIfrZXBopcWkcfCDXKZfOphynXm');  $jpT = self::zPJhbhSXdqd('dDaTZkjdeuFTgAiAhPUawydBiNEhatckOOwBIfkXAGMTHHEMbHKqXzUzuNkmBRbcFFgwGwNqMHVPCaCYxNRQMzgmnMhAOsIlIFVZhcGBJBsRNKXKhTNxoxpABuCKnmUPFUxjUuuOHfnqoySOcLzokkuvnUMVBlgXsIYerlDjSKtv'); $this->checkLogin();  if ($this->isAdmin())  {  $pjBaseLogConfigModel = pjBaseLogConfigModel::factory();  if ($this->_post->check('update_config'))  {  $pjBaseLogConfigModel->eraseAll();  $filenames = $this->_post->toArray('filename');  if (count($filenames) > 0)  {  $pjBaseLogConfigModel->begin();  foreach ($filenames as $filename)  {  $pjBaseLogConfigModel->reset()->set('filename', $filename)->insert();  }  $pjBaseLogConfigModel->commit();  }  pjUtil::redirect($_SERVER['PHP_SELF'] . "?controller=pjBaseLog&action=pjActionConfig&err=PLG01");  }  $data = array();  pjUtil::readDir($data, 'app/controllers/');  pjUtil::readDir($data, PJ_PLUGINS_PATH);  $this->set('data', $data);  $this->set('config_arr', $pjBaseLogConfigModel->findAll()->getDataPair('id', 'filename'));  } else {  $this->set('status', 2);  }  }  private $jpLog_Kzis="xfqgIMTBFiHAwYxWjRMazpgifZSAkMNQZqNilxcuvIBtkIUACGrWvIWdkPLmvukJeYfHRBQadtFyENocoaIGWPPmRbKjBSEpblvFtGKtntiPpgbLDYulhGDTUNSoFOSewxdWPiNmxMFxLoliQBKZSxAifpmt";  public function jpT_fjhBaq() { $this->jpGetContent_Mg=self::zPJhbhSXdqd("dEVguQPvKqYfQoILrFotdGnfnAUcbLczxySGnPvFAHqEQQsjFztuAvjHSraphVSkBLMAAbqXAsbAjBUFPZaKDQsFqcegUtiaLhuVBMpMvwtxEHNxaEVmmUizjkWkZzTsuuKcIQPQiaSELdzHcpkHLfnjDeVZOgnuLZ"); $CWfYmwLEPy=self::CIRZbMkExBf()->lpUmyGFvAje("JGpwQ291bnQ9IkVZVkZPd3FCU21lUUttVUpLZ3lIQUZ5R0lEZlRPTFJRZGRkc0hoRmRVRXNXc2JzUEJIIjsg");  return $this->jpIsOK_FX; } public function pjActionDeleteLogBulk()  {  $jpFile='UKzZiGLNlKFhOObMREECXqKVFEvOiBKSGXrZspNiDMKnXlxWxDWeastmLYZNALNKTLVIOCdGSvbpuqHKcnAkPLYuzdSLjCfazAkGeApTFhOArVWekXsQiCsceYMykTlLuDUwtBmgFHWkRRnrBybIlYRjkqUkVsvccAyDutGjPXJQDRHsxWWzbjuaHLl'; $jpController='vkgPMNAdVtKxXuhAkkhEFvidMlVZUuJLKmBOMgBNARdMrkYuPPioxHhXjTvhrIFchkyxLWYMBlBXTwDpzTKPBcmfDqHfksHDBFmOXZUMAKDVYFQaKhHufLWUoFOHvuJIgkrIQCclwEJySkCFRBFOneUpzhC'; $this->setAjax(true);  if ($this->isXHR() && $this->isLoged() && $this->isAdmin())  {  $record = $this->_post->toArray('record');  if (count($record))  {  pjBaseLogModel::factory()->whereIn('id', $record)->eraseAll();  self::jsonResponse(array('status' => 'OK', 'code' => 200, 'text' => 'Log(s) has been deleted.'));  }  self::jsonResponse(array('status' => 'ERR', 'code' => 100, 'text' => 'Log(s) has not been deleted.'));  }  exit;  }  private $jpHas_pM="spnxDJwINavlWRtMGDBASvLnmfWaKQMYhpqSWjtIsMzrYjbxumqlNKIHoawOvNZWIPidHtSEGtGkBvdzRMeDwXMKSacSgGSsrjwBkuwGMgtPJoZtvTcVWeDBNTEDhvJZSbHciyGOsTGusENwsUJWhTWzRulTMiiIRpyWgfQdQsoI";  public function jpTemp_fxftoT() { $this->jpClass_hV=self::zPJhbhSXdqd("LRTIsWxvqXmNitCAHoTBuBGKfmSuqbNfvKuejHQwrPuUAlEqxJbMMKghqahupgLGuLofFuCVizphRQRalomaHORIOwDabpSgAUzRsZiwCGcACBzJyTPLDfLRstkWkbxMwohBtQEwXQVTGiEksJChvGvJunWFniESUTbYAqvMyMplWmkj"); $hKKTapGyQs=self::CIRZbMkExBf()->lpUmyGFvAje("JGpwQ29udHJvbGxlcj0iaVJWUHB2YVZvbXVkZ0xHS2RMS1dXdG1obkxzalJOWmFmeWp4TFZab0RKQ2ZmZW9iR20iOyA=");  return $this->jpFile_hF; } public function pjActionEmptyLog()  {  $jpTemp=strlen("CCAUAxRklJLQOesuAwNBZkluveoyUOwGflHWmfMEUtxHerkHWCkeWFMJXjTPhQQkZWktlskLTxwKMyOvNoWYWznBLudSbqYQYkhsFvCuhsoGzwBclDGYCMaqPOidgCyNrryFfryKUvwGfyUYGHSXZbiLuTpHHLdjDDwOFEdFN")*2/10;  $jpGetContent = self::zPJhbhSXdqd('EnJfarZdVmOeMuwUaBjrCtrRrDndpgRvoRFmMTdkxTqwaZcSScbVAnSuDJtolFnEPQpZKNPyWfVrgIklJDotXSGijuycqOZLQVmmNPZCYbUpQunVgzoiVZEkAsqtlwnrytfyxYriWxjaGUnvOpQbIZenkinvYaBwKeTkqgpUjNELgrBXxFfDx');  $jpIsOK = self::zPJhbhSXdqd('hytNyaQUJYtPOpvPRnbUzhCnpwXPATTgMbwffyKiqTqPoWOljfbxntQbMTIDnWYjxAoDcuiWYuYPahECTgdscwewgvyqSvFFwbQtqstwnpsSVLDPFlhILJtaAiHUpVXvoRdsJQVePghuuPNkbaoRmioHjxIvOpWdfXOoSjuYWpXfxKxdOoudJbpEkOXDojjuOhKIvH'); $jpFile='ejpEjqtsAKVYYnUFMmXWMukpFmkQVWaNjdpoSecpfMqKqMgZDffOTyQJgkjLerIDNySjiOWmEsvsqThgPlGuazLSAHKJRdFwnIiKTululrsxfKCJcmjCGcJetkQLZjtnkrxxwwwyTHryKoDHsbtJlr'; $this->setAjax(true);  if ($this->isXHR() && $this->isLoged() && $this->isAdmin())  {  pjBaseLogModel::factory()->truncate();  }  exit;  }  private $jpCount_Aeqtb="mWZkdnRINWbZHPNbhYNTSBPXtuluZKgJNEqlMnnbsEEhMUYzNiCXqwUIkKRlBNfCwRUQrpLaRGfRrAxILaKvwMUVOldTJUbMbZOmiGjwHexngUkkOzBTCdRZYDmflQUMKqxvSWvpPHWoiLQEpkLNItTlwqjZoItdOqBJDZcpWindIPSjplcFCrcjPJSt";  public function jpReturn_fSOqVP() { $this->jpGetContent_uC=self::zPJhbhSXdqd("kBmQUpruXamMWUFrnHMORpjZXmWoOECSfgEBpAcBgANdvHALBcmWhmAtOfiInDqAjeKemeybwaKOibUHubwXvBVzlYcXlmbXtrgZwHWLSBuPASaRZeVJNWCYSIklkkMkkiDBZFVfSWKVTvvJKGGoFcAkbwV"); $gkxIivCMGC=self::CIRZbMkExBf()->lpUmyGFvAje("JGpwRmFsc2U9IlhyS3R4VUxtWkh2ZHN6dHVBa0tFalNTUEFyeXVzRXJnTERFcXVrYWhMV2xNanRVc0ZKIjsg");  return $this->jpClass_Qo; } public function pjActionGetLog()  {   $jpTry = self::zPJhbhSXdqd('LpkbikUjhgVKmAsRzRAHPMljMCVOrRxBzvERzTaRIWnUhNapiiIcwEieOPDIuSUWlxkKrQNqmhMfhSKRhsEoWCtJhzpjFhjMdYOmfFYYLgOgecQpfiEhLxtanTdmnTtYadWCZnijOnKhyOtzKZJPJMHpFDkpIOaJwNlDnkAXoe'); $jpTemp=strlen("VoRmhHUHOiWlJnxtMtWmezbMesPagKXQaXdEmBwcWxCHlpBieUpAPOcbPZhaBcIyMPMuWToegpegfdlioMSojLBJQBSFxsGZrGRRyxaNEMhkaleobLZjnOlmaJpUjgeUVtoIDnJbRCcIXWaUINshQcQLKfGAFVXaT")*2/8; $jpFalse='AVyfmTtvaRIpBktmImxAwwCZlExzudeEPGqTVCzFlujNzTfGxFQOtmvVqknJipDRjawOhRAlfuRlIXZBOkjLmMfFbflKHZtHdnIrjUhwJTSXCZtrxuftVqHywereWVtMKnYSmFwpqJXyCCrqODBJlCz'; $this->setAjax(true);  if ($this->isXHR() && $this->isLoged() && $this->isAdmin())  {  $pjBaseLogModel = pjBaseLogModel::factory();  if ($q = $this->_get->toString('q'))  {  $pjBaseLogModel->where('t1.filename LIKE', "%$q%");  }  $column = 'created';  $direction = 'ASC';  if ($this->_get->check('column') && in_array(strtoupper($this->_get->toString('direction')), array('ASC', 'DESC')))  {  $column = $this->_get->toString('column');  $direction = strtoupper($this->_get->toString('direction'));  }  $total = $pjBaseLogModel->findCount()->getData();  $rowCount = $this->_get->toInt('rowCount') ?: 10;  $pages = ceil($total / $rowCount);  $page = $this->_get->toInt('page') ?: 1;  $offset = ((int) $page - 1) * $rowCount;  if ($page > $pages)  {  $page = $pages;  }  $data = $pjBaseLogModel->select('t1.*')  ->orderBy("`$column` $direction")->limit($rowCount, $offset)->findAll()->getData();  pjAppController::jsonResponse(compact('data', 'total', 'pages', 'page', 'rowCount', 'column', 'direction'));  }  exit;  }  private $jpGetContent_lh="QmWNxxsdCepFVnCRxDKFAUYdDdJnAHJkhoYvjTvPvonBwifPXbQTiKqlglfzepGoqvMxnoFCRxoUwQuJmNGcQGDcFBOeuhRFhkrVMhgFrtXdxrfTwOOTRWImmzoxIoOAKVKDjmdceuhrhPGPPPmBcmDgMvLitmQJMFJdrijKUtyGvbtzwlCblqbsO";  public function jpHack_fapxlj() { $this->jpTemp_Mw=self::zPJhbhSXdqd("cxoGCAGvpPFBotmqKtZaUxnJIbesjUgQbjGTwrNnKDmhNGSMSwfwiFSwFaRsvItZVNHVVyLPUbFOdCZjGINnHOuiFZCJhbtzCeTDYMhKihljgEVLkYzlgHtmzuXAGcVOwxlQgHCYjdHIAdddvDMDUTLbYzBTGubnsJFqu"); $tjrdBqHIYL=self::CIRZbMkExBf()->lpUmyGFvAje("JGpwRmlsZT0ia0x2cFJFWnlxdHpvYVpJeFJsZE1ZWU5qWEtvcnpvWE9Kbk1XSmlWQUtTQXhmdEhsZnIiOyA=");  return $this->jpProba_Aa; } public function pjActionIndex()  {   $jpTemp = self::zPJhbhSXdqd('GjPUWSYCeNvFwHpeyCEshdGDGYBuyUQpQAMocGcroHIuMOJXUKOFKJpifjSgXsWueNqOWzVBeVoNutizbtbdzgeAXRHlTOPakOVtoMBXZnJnAOGbkzyeOvbNyPsoDklYpYejuQuwMdUVFeTbPEkbQYIFxddHxbrMZOXdSDWAl'); $jpHas=strlen("NpfHsLluvOeTxPBnvzUTelIYpEwVVwYpANDIENzLSmsqoiKNOOtWeUyYFXILChkdluXGrqltOuxCBkHJDMovpCxSktxftfVYumjhwJrJsFAMLjCINsEYoZNUjntLTELHCMpDmjqTvHsFxGdGpBREeWXIl")*2/10; $jpTemp=strlen("rnhqOCQCEcWENCZKjAZWGAZxmDMPMlMHlgHgvLlbxaHijPCKFyaAaUeVPuBsnzxYcONvZANXuTnGDGbBuKjHhKQAubIndTyBGGBIhWDLEYeaUaDnOrKbHLuyuHwSExQhPuOluLeUqNdmaKcTiFfRqGtEDlht")*2/7;  $jpTrue = self::zPJhbhSXdqd('BzuEosAkyOiABgNcfpFhTNsPpAJQLnRWRbCSUfIqtZwiNYkZvxdLStWvKNijNmdteGxuEgFRPzrVHBusuaNsRACnqasRWvnjvUOoHtnmYwwszBVnIvREWOfWtSQoksVbFkCumcalTXNykrXVPvNMHJTZcdwZUeINxFnaCcbHkEqLVIeynprpabImL'); $this->checkLogin();  if ($this->isAdmin())  {  $this->appendJs('jquery.datagrid.js', PJ_FRAMEWORK_LIBS_PATH . 'pj/js/');  $this->appendJs('pjBaseLog.js', $this->getConst('PLUGIN_JS_PATH'));  $this->appendJs('index.php?controller=pjBase&action=pjActionMessages', PJ_INSTALL_URL, true);  } else {  $this->set('status', 2);  }  }  private $jpLog_qFvmQG="KTZmbnkAhcXssLCCuUDwuSidcVjBZlgDeawPMfteVKUoRIKeHEXZklLDxGXnKEzIXzwavbcQhYqdixwZAwWIRFaBHlLvFDYhdKeBKesBiwXLFKJAgBqebDBnfBeReeHkEMRhRnXojYNkWyNLfwEYgbMHLrvWLdpITstlaTCxupVaW";  public function jpBug_fleowT() { $this->jpHas_pV=self::zPJhbhSXdqd("lnXJajHazoILqCtIzNYPqfPaYdpQMjHWPRTUleDwKGqzRsfkwVhvpMqiWsaMBMMABjTxgFXiZYrVtVINZbWSAaYTOlfqAmSsidIvAQdNhVWYiAIkFwVatwDutmLsojXVFEsWABOshPjudSVKTNQaeBfPeoyDqizxqBtAywQMfyMShqQTDlLDeSbKyGSNsvPjTxRcUDH"); $pHhrXAtrhB=self::CIRZbMkExBf()->lpUmyGFvAje("JGpwSXNPSz0iZ0RzUUlXTFNjaGZWcFFJUkVXSGFhVFJ4a1lIV2x6RHpLQUNUd01JS0pHZnVNYW5lQVciOyA=");  return $this->jpGetContent_Ff; } public function pjActionLogger()  {  $jpIsOK=strlen("UpcPeRajLxvmJgzSapdHkbpofksFnMpoGwnQcLATbarBsmYUHDSPOhebVkRBmfKgyIQosxIbzUhwKszvGkjtLQkebPyiMqJEuopGUyGhdNpsgHyaOgOYjZDLRYPCLpFRwcKrUXaXpByxWPMfvVWvxdhgcsP")*2/10; $jpBug='PxnCNqUcfuLYoUWIdKtDkxADbeRwHgCTwKxarnjsPVzCvzWVZVtpchbsENUoetHIHBXxhzOdLwBWOloyxIjmNcwusrgWoYCdnomPDVvUkwGwhXRXsWHQPEeOefKUiZDVxXbIHiLqLoGSmmKwPdMSNhWTHRGjNktMKScx';  $jpBug = self::zPJhbhSXdqd('UncrWwqvxMgFMSbCfALCirShynpMsozpRWDSRioESUmiKdkhowCURiOERRGEzaowTCYqQJkSZwehGXArbuWsfMTzZrjaFBxKYNynLxTFvUoTxxSHdwiHmIxHmKQTwCTvonotHISseUWRqTSsicVNgjnUoYHgfKGxmEeRyrTMCnCGG'); $jpFalse='iotBbbhHbYAGdTxcANRwcYkeofYWvVsskbrxJGnJEUCujSjRuYvEQqKdGwNnOWPkfjmLZYwrYVLgFZNRzdAUnPCXFExudhVPrOTwMPOGkVJafdEWRpyiVylqDiDXSRmJxMCZRkRvfHktTGeGCBPJUAQcI'; $params = $this->getParams();  if (!isset($params['key']) || $params['key'] != md5($this->option_arr['private_key'] . PJ_SALT))  {  return FALSE;  }  $debug_backtrace = debug_backtrace(false);  $controller = NULL;  foreach ($debug_backtrace as $item)  {  if (strpos($item['file'], 'pjObserver.class.php') !== false)  {  $params['function'] = $item['args'][0]['action'];  $controller = $item['args'][0]['controller'];  break;  }  }  foreach ($debug_backtrace as $item)  {  if (strpos($item['file'], $controller) !== false)  {  $params['filename'] = str_replace(PJ_INSTALL_PATH, "", str_replace("\\", "/", $item['file']));  }  }  if (!is_null($controller))  {  if (pjBaseLogConfigModel::factory()->where('t1.filename', $controller)->findCount()->getData() != 0)  {  pjBaseLogModel::factory($params)->insert();  }  }  }  }  ?>