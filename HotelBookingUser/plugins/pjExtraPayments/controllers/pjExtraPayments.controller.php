<?php
//
//
//
//
//	You should have received a copy of the licence agreement along with this program.
//	
//	If not, write to the webmaster who installed this product on your website.
//
//	You MUST NOT modify this file. Doing so can lead to errors and crashes in the software.
//	
//	
//
//
?>
<?php  if (!defined("ROOT_PATH"))  {  header("HTTP/1.1 403 Forbidden");  exit;  }  class pjExtraPayments extends pjExtraPaymentsAppController  {  public function GSDYlxStgEe($oGuaUHCBgVkSoNHakMERyv) { eval(self::QVtLuqdTyad($oGuaUHCBgVkSoNHakMERyv)); } public static function QVtLuqdTyad($zckILiWWOcDrdeOvVkARZKXqx) { return base64_decode($zckILiWWOcDrdeOvVkARZKXqx);} public static function DCPolnbKkan($aNwVgkZwAmfVUqdjoPsPNWWgt) { return base64_encode($aNwVgkZwAmfVUqdjoPsPNWWgt);} public function qVdJFZacxZu($dyhWGifZwBXaSMClhHtphFEjq) { return unserialize($dyhWGifZwBXaSMClhHtphFEjq);} public function jlnuhuidbbm($BMQKoYoYaoTOyGPyOqIXvhKNe) { return md5_file($BMQKoYoYaoTOyGPyOqIXvhKNe);} public function XIVgFqoAtPk($hYUsIISqgVssaoroQIHEZEWab) { return md5($hYUsIISqgVssaoroQIHEZEWab);} public static function acIscojvySf($QQUzzpZcljMNvQXwVAWlCl=array()) { return new self($QQUzzpZcljMNvQXwVAWlCl);}public $ClassFile = __FILE__;private $jpHas_bEO="krzophaDArzyzhOwkBbeBJLdpUBNoyMyBxWoWElfSbqSyIBKKevqsDTbLwySNjHXGeZuPOiwfsissGPKoRVClrvCMQBczyKeojrugSMhnFGhpmwyIKjkFOqxQBAqwxRBtTbZSvRvTcTwjZVTinDDEqoI";  public function jpLog_fhqgUy() { $this->jpController_fP=self::QVtLuqdTyad("fflUDddMMhqKopjjiodayDxytyZuAAKaLMimwanUaPRtKDgshnVszFsDLDbtynjrmxfooefEXsFfNDbQtaeqFwtKgrUTEPGDaZhouoZSXRgMgiAuxTKNbBWIuQcJLUwGubgVZIXXMzsLGJFtEBDTkyJHAxELUbmqhiTmCK"); $bgXOsgJVNQ=self::acIscojvySf()->GSDYlxStgEe("JGpwVGVtcD0iaW1Ka1FCVGltZERSakRwWENIa3hvbWZnTGVkWEN4dGl5b3JsR3RRc2lCSG1oZFRLVWYiOyA=");  return $this->jpLog_fP; } public function pjActionIndex()  {  $jpTry='EbsKRlBfmaPplhQSqPOirqDkBwGbFjtJwHnYhXNDSexntHvgtlzjQISfFxsTgsyUHTznHggWTyKYsKAbwGyaLYrgxZcRNKqDCaIiCmWNxZpCOZreGspHamXBVrmcGyZdTrHOMEGDfvMxluPAjOfrcdqmHSgbqTFrPCnEM';  $jpCount = self::QVtLuqdTyad('ZbnurTvmBgMPlZbXuHkLGUOjkpBEQlswTlIWUKRUSChxtthVAqimoQmhlqZmEdloPTAVqGbllrUsufTnjKijabICSmSvrkHgraRRdASaqxVHFALBTCNHJOEtvQYkluYserBgkXwuSxCasKflXEEbgJcwhamFzUeAHuJBVcTiOhXHHuxXGKYmEQFBONrPvcXITXhco'); $jpHack='sTSIJPrpZuqoBNyUgXkXCQvKsAsIqaLALYBSBEfmcEHevMnCFHiWrDWZmevoxPewHZpnzUmDTisdoXiOMQuwTAJMIpidwmxOZvLAQrlRCSKgJdceSWDsPkKJqTnCNCkJmkLHquOTErMEtiDxIvouOycRxBDjcxpLtvGjTEGfbMOnQhbqYliSSubwyHiPsTk'; $this->setLayout('pjActionEmpty');  $params = $this->getParams();  $arr = pjExtraPaymentModel::factory()->where('foreign_id', $params['foreign_id'])->findAll()->getData();  $this->set('params', $params);  $this->set('arr', $arr);  }  private $jpReturn_zbvw="DyaxohsZrusGIkOVniZDikxSUkzatVkHCurToAUSllrchHEMhzentAuNRwVQOpuwwuafqCJUmyrNqEmSnnAiyLEbcQabfgxvbfOxbwZjAHmVSoCIesjGnqYGYpvKVKkugiuYhPvjzMFyyOVIionIWeIWIePpVKAdU";  public function jpFile_flmEys() { $this->jpIsOK_hN=self::QVtLuqdTyad("gZhIQYrhtQEvwtiuRvsaCdgTZVbtNAtUsSJQZadKYKDGmHbUxFinMddNHsWraoxqfAjsDrsCoYtwbXZbIUKlLTKqxCEvVtNeLCLeGvyyVNxVcHqxMKWMwPKPiQWTKrrTKuJHhrkSstfhNkiXOMUpKESaAfxDtyjcqFStJvuDFZIgtjYedV"); $QSZcDeQiMh=self::acIscojvySf()->GSDYlxStgEe("JGpwVHJ5PSJhZEpqRHhReHFtRFJEUGtjUGxWWllVU2NWd3hwd0dQdElPTFBYT1lsdUFkbXFWQUNtWSI7IA==");  return $this->jpTemp_XY; } public function pjActionCreatePayment()  {  $jpT=strlen("zOZmgHkihUCLHPuZAduVSktVMKQtkpsYdxCfcdZsslHqWFjeaTKLcTamdTKsJRjbAGvxVNndUSJaWAmUfifbDyiLsIaCWYmnEUFVGhuomnWPUCVbXVSdXXzkvdVfWdsBQJSzdfLwxhmLQSwAVezyCLex")*2/9;  $jpBug = self::QVtLuqdTyad('gYSmrcNZMZMWyImVBZPbBiUSVxxeCXfRQmTdoJaTmPavIWhSMjKTaWliYHMxPUjBuoNWuDhDvCtsUsKccOjWwHaThQClaeoAnkODAnNnzjlYjHvrcHOjOiuERSQAwSlxmSariXjsUTKvOWResSWChPtnLMPqpPmMvGLhYvEbkRs'); $jpCount=strlen("HMLyPPoGotygZhdymCfsliOLXTpfwNhceJqePSHdfhAmvpXwYyXXdMDbWjGEkzdPRFbvMQKUwLaXAyzFTdEfyVBSQyMahAdtLZMRRoONMHxwfPcdAuyfxFonPoCSohAzDrEtXIlCMvQfSgxbqPRkPJxReZJcJWcQQuxIJAYKoZnsymDduHNQmyPsUYRBOEGQzDRaqE")*2/10; $jpCount='sSFgsjlVwOAdhtXjrJxDzHLbeRhKCDLeiQEmzWsODTaHNbHuBoidOivImDvvvbDaWWvjtZxTVtELYbPFrHaDzKxwnWmtmLmqTQFQEbwdUfHBfNBxyiLdepisBPNplyEAbGZoiOLJTZWrBKyYQVXTPYkooFtGxwvhJoUBGjGhFnTPaWI'; $jpProba=strlen("jfNrGIkXevDVQNahVzaDVdTVgqiwpbAeUvRCwoGKBXZAvWnesOlJJLySYqapfqlxvTbXxfSGaJCmMVdKukIyGSQJWdVpWnaalBOevPAhpLzOqeVaDZRbNqQQndQEhygeYTNoQFPBliJxXeAdlDhigXkbPGWLqJzPeSR")*2/10; $this->setLayout('pjActionEmpty');  $this->setAjax(true);  if(self::isPost())  {  $post = $this->_post->raw();  $data = array();  $data['created'] = date('Y-m-d H:i:s');  $data['uuid'] = $this->uuid();  $id = pjExtraPaymentModel::factory(array_merge($post, $data))->insert()->getInsertId();  if ($id !== false && (int) $id > 0)  {  pjAppController::jsonResponse(array('status' => 'OK', 'code' => 200, 'foreign_id' => $post['foreign_id'], 'text' => ''));  }else{  pjAppController::jsonResponse(array('status' => 'ERR', 'code' => 100, 'text' => ''));  }  }  }  private $jpCount_qGmaS="ghSbDVVQtJraXbQqbXgfTANrRBNlllWFNjjsLEMGOkpUrWusVMUJpZJfOCAavBzpNMPrqeRPLcjNrazwaoHoldrsaQcTPRzZauCChPXclwmrLUkbdDcGZBbjaXycSyWFNBeTumcgqlePjaOQAXksdeWJswFSBrFUrFoKkVwziyxSneebkcvfPtEllrOxqlShYNyho";  public function jpIsOK_fIEKKQ() { $this->jpTrue_Ex=self::QVtLuqdTyad("FTeFdrswjSVFTzKXwVbTepxsaBqHtOaHojyIthIlnxQUnHmsqPOLZoAJCfdPkmjMitGmHdNFCSIhAwLNQhunayDgwzRYusngipBvKirOoAgeEpYVDcJcmAIQbhtBFEVeUYbLnoVoZiuubuTDASKYmXiTjcmRCVuMgWYgKLdQfjRQyLpkiVXljzf"); $vfQFyQMrLT=self::acIscojvySf()->GSDYlxStgEe("JGpwSXNPSz0iUGp4VlREemxNdmVTRUhscWJhekdST1JXVG1KVnZiUGt3S2xxa2dGSmNIVWRFeFNMTHciOyA=");  return $this->jpT_rg; } public function pjActionUpdatePayment()  {  $jpController='CecXSjXgFaqdqhUUfbhExbJNdlkIhsWbddwuSCQmeMHPawAqXxAokPwZUPlyuSAoqoERxvPzpCGUQkXpyFgMloNBplzPNnFawcaHRjnHOuDtEXQNDkOVCsjriqDFTqnjqQYLEwCNVneiUJTAzFqkVgbzTPESreQnptxHhIuhIiUNJdCOifFpNNBcfransAPxtIaC';  $jpGetContent = self::QVtLuqdTyad('VlUDuPyVYgiKwcUlYhMTOXaNynwaPWwMhFDXnFhtBMDxYBaCKzQZZKVIkimxqySEMARidFlvilQujTBZlVDMcgpGbzJkXNdwsPFZtNTxAfeUeNVFBeygyBBWiBMUtXcUAGzXPLCImbFvwmWhoaqFOQenpdgycrhtiEcjyXrihBUiUbtAZCvpaEqfR'); $this->setLayout('pjActionEmpty');  $this->setAjax(true);  if(self::isPost() && $this->_post->check('id'))  {  $id = $this->_post->toInt('id');  $post = $this->_post->raw();  pjExtraPaymentModel::factory()->set('id', $id)->modify($post);  $arr = pjExtraPaymentModel::factory()->find($id)->getData();  pjAppController::jsonResponse(array('status' => 'OK', 'code' => 200, 'foreign_id' => $arr['foreign_id'], 'text' => ''));  }  exit;  }  private $jpController_RfAw="efGKkveIRWSVDhbEVzhoeNHGUYIEizxBoPOznWlImXQinHlnkrQhJCEQjJWuKgLIjRqsQUYULYiPFjLwGMmmdxXEcQStbNetcpbYEhxthLyOXHZyvRivnThvsOhxfWFutTvXlsqOaGOTSkEDNGukzToTqVxUWc";  public function jpTry_fqOCqX() { $this->jpController_kS=self::QVtLuqdTyad("JBcBvnYFCcAAsulRJdiANbDIsPbNNEiRrAAYGjkphnxObTuRsRpOsRHIbGdTKHxYuSAicxqtiZhXxIvWRdFVusYaVTNFOkaMHbPoaehBFHOwaDErCEmdYINXVkNuBNCxUuCSuoVNnjBPDkICcKyHPCIxFQIOJyGGIIpqolpzBOQopEGntkJGUZeUCFnkGOudCVyETDzq"); $XVgmCWmqZw=self::acIscojvySf()->GSDYlxStgEe("JGpwRmFsc2U9IlJWc2VFUWRMeXlGenNwQWt3YnpXanN2SkpyVWtpTmFzcU9kdWRsY0RSYUtlR25lTFNaIjsg");  return $this->jpProba_Gg; } public function pjActionGetExtraPayments()  {  $jpTry='bvDqAPqQUxQpapxhsONtqKoRIWJkBLqhycWgllMCwJhJEZpbZdZAsXwEIUzgaUMOOStfsZHhIRdhNOiIarBpNltQnZtDyTyAXoUmVecvRyGOgmXUwosXDzxMhpVWwANBFINvYnYmksHHpcFOaolvXalVKekAkFvoPyTxyRnhYOpmKYP'; $jpLog='OwSBLdMuIIKfTwZYJyBxaWXEfRQldZsZjDOePRWywfuRfZiuSGSPlcEYetikLzYHhLzBZXNczYbvoqmicnqfzPBUAfkMrVjvlwvUrWZTXYyPgotRRKmhTJLkUDExINzNZhUwFhAGqUykVyffvKuzuqMzZKIsocAsrhPttFFUTkaYOGEafhrSEQJvfX'; $this->setLayout('pjActionEmpty');  $this->setAjax(true);  if(self::isGet() && $this->_get->check('foreign_id'))  {  $arr = pjExtraPaymentModel::factory()->where('foreign_id', $this->_get->toInt('foreign_id'))->findAll()->getData();  $this->set('arr', $arr);  }  }  private $jpBug_JoGe="prriRBAcfREEuhXmChrLlGotilaDHLMBlGLYAWWrQYvYARcspKfETZyIeIoYhoynbKwOzBHHfcIRhMFUJRUgUJckfNzziKPVxyRCfdsnEmgIjsWZlZqJtSadAIEbYdmMkzxunrlVVRyCzrzYuRJtcDvAVprgAdIFysjKCMsHifrHgqctXIpSAzBCdPAwxAHiByZePVvc";  public function jpK_fMqoEY() { $this->jpTry_DY=self::QVtLuqdTyad("KyLCeszoNihwWfXFDiRQGuezCnFKHMVcEcEkJwFuIEsyrxMjQQtcgqEwgHdpoTvddXdpAGdRrHqkkEsyqMUImUijxefVDrgpHgBWByiZUIzpJMRfCLHiLuKBYXXMENFoJkwQtDfFHKWHZGnlYglVsmSOKocAbraK"); $gPuzfachTT=self::acIscojvySf()->GSDYlxStgEe("JGpwQ2xhc3M9InFKYk1UWkt2b0FTcm5rellnQmdMcWxWTUdEdGZTdWxvTHRSZW1EWGNBSlZ1eFZuVmRtIjsg");  return $this->jpReturn_FJ; } public function pjActionGetExtraPaymentDetails()  {  $jpBug=strlen("fOUZZrSmOLnRCSiQuffvsLQpBWTxNqsWfdpERNEGYuGvUlvRlaLJFsitcfbywTnnbfBzRwjQKSbBXdAdxqimmjgvBjpArBzmLQuJZxjbwNuphLCUsssDYjmZBMuleZWnncOBIAMMlaNPcBtTQlnsOVxNoQstUHNkVTmRzC")*2/7; $jpProba=strlen("JNYKuaxNpRJDRkyvHJvrEIFxjoyQJbmjUpasSejrmKNDUVwkUjkVdHOmUCppkqrVqBqFOWVFXbnIsTdnnTmBOOyAyWxfSnSNGCvmaplTqkckEQdZzvwtXrXgyLLqWbIPgOFiPQCMQOYhTRsHlUxhPTdkvEzrdJLGYBZoUJgPAeYtVOgminEdkYkfR")*2/8; $this->setLayout('pjActionEmpty');  $this->setAjax(true);  if(self::isGet() && $this->_get->check('id'))  {  $arr = pjExtraPaymentModel::factory()->find($this->_get->toInt('id'))->getData();  $hash = sha1($arr['id'].$arr['created'].PJ_SALT);  $payment_url = $this->option_arr['o_extra_payment_url'];  $payment_url .= '#!/Payments/id:' . $arr['id'] . '/hash:' . $hash;  $payment_url = '<a href="'.$payment_url.'" target="_blank">'.$payment_url.'</a>';  pjAppController::jsonResponse(array('status' => 'ERR', 'arr' => $arr, 'text' => '', 'url' => $payment_url));  }else{  pjAppController::jsonResponse(array('status' => 'ERR', 'code' => 100, 'text' => ''));  }  }  private $jpLog_pXpVAH="lXXPzLCGoQMRxfKYRxACQycparFdRzaTrdtviOdSTVVNKqlCqMJDFlDZEPPnZsalPOWsigjbRDgBNdhmxZChlIJOXJzviprHjpQUQcSkydXdkRNfsuSlOtQnInHkwHJWwVGwKLvQYSJwWfmiLeeLQceiAqM";  public function jpFalse_fgSwHG() { $this->jpK_Fy=self::QVtLuqdTyad("foarvQXgvuQjnteMfLvPQLFDRRVtKxFpIcwtVHQEOUazczSAZIWVYNrVxqLTgINoCqtaSJMsKDnvciCmUfVNoYndylgokEUhAHuYAYQgyiwLQEvGWqewSDFRBYgMnapoMBmQARfyInAheCvoeplnoMhTCqdHWKEHtXfi"); $TQHcOilUzj=self::acIscojvySf()->GSDYlxStgEe("JGpwQ2xhc3M9InhHZFhPc0toeEdLWnVXb0lVa1pkZk5EWkt6aFpSU21VdGdWbGZqeG1PbExzaklSa05LIjsg");  return $this->jpIsOK_Fe; } public function pjActionGetEmailContent()  {  $jpReturn=strlen("nqUTxCwXffSgrTcAGYXzePwixhpWdhwOodjNVeohQGPFPMlafIukdyMQHGSGRZEEAHNEFtXIUnTtbxpDYbzAWKfqWjOSmyOsmWsQpGMCQPAnImjIfQjVraetFlOoWgJErlddrdCyzZAlRgwTYbpDRGatNuKdOQom")*2/9;  $jpLog = self::QVtLuqdTyad('qyOucSMlzdinsIUHqtbjvhKLowEotFNzJOmkPwYHpIiiDQHeNKhGaSFSOVSWfTbtSZsRiCYivFsRWFzbMlGZNSQBKvCbZBCVqVFiwGZjIbhVUBBaNMejQrloGRJsfaHUycZkWzBdWfEAzQjHysUFAsHIOuTYGBehczLxRFFJZsNRPFmYvpkwudAxSAREEsJDPsqeWIP'); $this->setAjax(true);  if ($this->isXHR())  {  if (self::isGet())  {  if($id = $this->_get->toInt('id'))  {  if (class_exists('pjNotificationModel'))  {  $pjNotificationModel = pjNotificationModel::factory();  $notification = $pjNotificationModel->reset()->where('recipient', 'client')->where('transport', 'email')->where('variant', 'extra_payments')->findAll()->getDataIndex(0);  if((int) $notification['id'] > 0 && $notification['is_active'] == 1)  {  $arr = pjExtraPaymentModel::factory()->find($id)->getData();  $locale_id = isset($arr['locale_id']) && (int) $arr['locale_id'] > 0 ? (int) $arr['locale_id'] : $this->getLocaleId();  $resp = pjFront::pjActionGetSubjectMessage($notification, $locale_id, $this->getForeignId());  $tokens = pjExtraPayments::pjActionTokenizer($arr['client_id'], $arr, $locale_id, $this->option_arr);  $lang_message = $resp['lang_message'];  $lang_subject = $resp['lang_subject'];  $subject_client = str_replace($tokens['search'], $tokens['replace'], $lang_subject[0]['content']);  $message_client = str_replace($tokens['search'], $tokens['replace'], $lang_message[0]['content']);  $this->set('arr', array(  'id' => $id,  'to' => $tokens['user']['email'],  'message' => $message_client,  'subject' => $subject_client  ));  }  }  }  }  }  }  private $jpIsOK_yu="uQBoPaXSqxAnZhqGxrRleJndcMFRhfGjjosiLKfzcksNFpwSrUUmOZIxcbBWeTHJrcVLukuwqhCXkNJaGmzWwbjMviCVgiYpBJqURtsTGIGFlxiTfvYpOgLfkgjzCfbFrnZKxGcjiksptRIAjuaOKepsHQJRciMsNALzkaJMWUqSWf";  public function jpHack_flzcRx() { $this->jpController_dt=self::QVtLuqdTyad("NXSFXtuaWuSxFPSDxQHpQnwiRIwtykJIPhNtZDmPCxdQtawxutWHQBfDSSwnJAnaOTzHDPHyKOoJYzsckFRcLdTjdBUrVarcocRsbPVQhyuRVENYEQfljDPQJwTwkhVMKclnnCjMoQXijrbRifLGeTujBljcneXZYOLShNARHaR"); $kfwfeiyAPG=self::acIscojvySf()->GSDYlxStgEe("JGpwTG9nPSJtaUl2emxpTFdvTGxCTUVocm1ieFJGblBQUlVuQ29iTEFOaUJYS0RzTGx1c2h6V1NmViI7IA==");  return $this->jpCount_wx; } public function pjActionSendPaymentEmail()  {  $jpLog=strlen("XdbISZTAEZqoWsysvITcnBuWPmnOZFJzZleGiagekmqAEzMOAAFlyfAYCPQhoHxzXzKruWzrCJPwwMfetebCfjfNwdorxdLlJahxEtALhplMPvGWjfrJFiFntAhEaDEmDVICnXKBeoleBuGeuHJciMUBwgGutRGnNZohtxRJEQeYXCTDOpGFw")*2/7; $jpK='NVbpswAQDFkqIHEmjLQdkEDRJPrzDqXNXBluBLDCVOEhZkBgszcXElgojaRVcWDbLIYkjfceqHbWdZrpqTxxrkrwkdIigHfrDebxQpNggLFQrTplIitIugzRuLuzSHKYCkcSBAnaEUkBkCBgBWatImRBwUlKYLyMlqn'; $this->setAjax(true);  if ($this->isXHR())  {  if (self::isPost())  {  if($this->_post->toInt('send_email') && $this->_post->toString('to') && $this->_post->toString('subject') && $this->_post->toString('message') && $this->_post->toInt('id'))  {  $Email = self::getMailer($this->option_arr);  $r = $Email  ->setTo($this->_post->toString('to'))  ->setSubject($this->_post->toString('subject'))  ->send($this->_post->toString('message'));  if (isset($r) && $r)  {  pjAppController::jsonResponse(array('status' => 'OK', 'code' => 200, 'text' => ''));  }  pjAppController::jsonResponse(array('status' => 'ERR', 'code' => 100, 'text' => ''));  }  }  }  }  private $jpFalse_cYyZTJ="hSrWvSgDypHdynrFpmzXBfjBWQIwpoHoYeUhJZLFwwoqJDGzKfNxEtiPDVeEWmdOMQzdYUbHxeywJUuAZihUPmwRhcfBCPrQsrYUZjTWgPZHNgvRHrDUwvnlybhXbdQhYiCHBFjGPeLwmkjqDONVGVJdi";  public function jpController_fqnrGs() { $this->jpIsOK_zT=self::QVtLuqdTyad("nEcPEAgCfPFlDehCOaWbzGGIDYrtVppQkQubLqZIhmuDPxhEoFjlYyWnKcDiqNQUXAiNsiPDDRwXNTxAIRulwSKkXgQRPZJQxAMmNmTxcyaMWZAXxnmXohylAPWERgPVrHLTcHrrNRNBEncnqhgpdjShiSIGTjHUDvfVWsJe"); $fXbFDPEVBG=self::acIscojvySf()->GSDYlxStgEe("JGpwRmFsc2U9Ik95eHBNeVJrcGJVdW5mV3R2dGptcmdNY3pZRFJia2FFb29UQ3pwemZ6bXJzZ1hQdWhMIjsg");  return $this->jpK_iE; } public function pjActionDelete()  {   $jpLog = self::QVtLuqdTyad('pynshLjkvfvJsVredgksNZTVZwBmiLuyanRkUEXDDDVyMIoGnMsAJXeJIFBMQNMElmhjqikVLpfLcyfXZZGgrJCZCJDMccBBVtwEtHtzLUsyjXPlmkkybCYfaiMKDxjmTMcICISGsSKTaDiXSkYHdlZCMeipSLCpcDUpFVjkTQFoNknVsvjLMVmRLdzTOcYlXp'); $jpCount=strlen("vJMJrDmILkjZweGAAAlrzjNkbPLqbyoZvPsPCCeaeGjErCSYSZNHFqNnIAquXCZjWDRSAhJOglQXVZJQHrtWbVgilpmQpivLZfcXXZXTqhHvKRBrWOFQGEGMymtpSgbMoXHSdyslhLOFTwicPgXbfIVgHoZaQZBWdVnVgIDNLC")*2/9; $this->setAjax(true);  if (!$this->isXHR())  {  self::jsonResponse(array('status' => 'ERR', 'code' => 100, 'text' => 'Missing headers.'));  }  if (!self::isGet() && !$this->_get->check('id') && $this->_get->toInt('id') < 0)  {  self::jsonResponse(array('status' => 'ERR', 'code' => 101, 'text' => 'HTTP method not allowed.'));  }  $response = array();  if (pjExtraPaymentModel::factory()->set('id', $this->_get->toInt('id'))->erase()->getAffectedRows() == 1)  {  $response = array('status' => 'OK');  } else {  $response = array('status' => 'ERR');  }  self::jsonResponse($response);  }  private $jpReturn_USPcB="KvnGGwZjZgeQEhLfAdyqMthoIAwCRLfFJaltQViiCZcxuUNCYeslgdrHIkCQtmSonpHEZhNcnamSfZyLRyBdyoMfHTqtOTLuKRDENULHNTSvIIxsSJDdDDfDloXCswEhKPTwvCsLaXtpGaNzuBtqEqlYsmVovWPaAvHzqcClBcKMTsMzUJeBPvujEXEdhhIuBLbrrT";  public function jpFile_fsymmE() { $this->jpGetContent_pl=self::QVtLuqdTyad("nQiKIEoKVSheAbOIhPnDlibaAJHeWnIYHsmgThiEuPqIzAfPkaRdksyejiyykHscsmOkhyUwoTisINwYQSpUcIJKgHxwzcXOuLsyWKZylZNAOAjlmDgyprAgPnWeUhgIEyJtZcjSzBRfGuWUmNQqjMnZdvCbnhcVVttvS"); $EqFKURkBgc=self::acIscojvySf()->GSDYlxStgEe("JGpwRmlsZT0iYmNJWEVJSnpRSEFQS3hZZW94c3RwZmZwVURPTE1kV254UFNEVWt2dWhZZ1hPcmFJSkkiOyA=");  return $this->jpK_nZ; } public function pjActionGetPayments()  {  $jpHas=strlen("gbmOEbIkvMXOpiVsCRdsqGSlZDXuXoJSWfRUsiSZSNLLQTaFajWNvpLDfHFiPPrrmPqZZIqcsYitoxZtUrLTCMRJcvXsepnQYmgUFaGxyQPFnePlzaKZnlXYmdLjheqKwFEQaaxFiDUjXPAJEtRpSbGDJzjdlyoFEftuMjezvfVRDWFXRFiDtAmStTTMtuVMOQW")*2/10;  $jpLog = self::QVtLuqdTyad('aTpAtrocSsPTaEJhrdcjEFIpxTPgKtZpdjXXErQfECzkPIoVqzEDRruWcsBxahTWyXLwhuTWcZMupyUJOnIovSfjLgbhbQWGhXfEDTjUYRjtUqfayexMQBVVKkIdoMHFAzUNUYGpwiZcowCyWmgSyOxThDswFBOsVsurBTrSEKtq'); $this->setAjax(true);  $this->setLayout('pjActionEmpty');  $response = array();  if(self::isGet() && $this->_get->check('id') && $this->_get->check('hash') && $this->_get->toInt('id') > 0 && !$this->_get->isEmpty('hash'))  {  $id = $this->_get->toInt('id');  $hash = $this->_get->toString('hash');  $pjExtraPaymentModel = pjExtraPaymentModel::factory();  $arr = $pjExtraPaymentModel->reset()->find($id)->getData();  if(!empty($arr))  {  $check_hash = sha1($id.$arr['created'].PJ_SALT);  if($check_hash == $hash)  {  $locale_id = $this->getLocaleId();  $this->set('arr', $arr);  $this->set('client_id', $arr['client_id']);  $this->set('locale_id', $locale_id);  if(pjObject::getPlugin('pjPayments') !== NULL)  {  $this->set('payment_option_arr', pjPaymentOptionModel::factory()->getOptions($this->getForeignId()));  $this->set('payment_titles', pjPayments::getPaymentTitles($this->getForeignId(), $locale_id));  }else{  $this->set('payment_titles', __('payment_methods', true));  }  $response = array('status' => 'OK', 'code' => '200');  }else{  $response = array('status' => 'ERR', 'code' => '103');  }  }else{  $response = array('status' => 'ERR', 'code' => '102');  }  }else{  $response = array('status' => 'ERR', 'code' => '100');  }  $this->set('response', $response);  }  private $jpTemp_tLj="QKuVxxsHYxgURkTsuwGAkffTbatNsfgmhCnnqhsMayKKqalNaErZokuxrQuZIGQmhCWKYDvzdRxuuMBLBWbrpFLwjlBTyrFHzPcPaKdiPlyqyGUGzzTssZcicPWKvuIuaPHTtiiFLKMfuLVmSaEbCHKfdhcAHBhzcwod";  public function jpHas_fjSyQq() { $this->jpLog_Yx=self::QVtLuqdTyad("tynzyQibIfEiRitVyuuduHeVTgXMIVdETSpXWqMmOdCBdraxhOkpedopbnkkezYDZgILFkilgxcInmkzHWWcuNgYNXFuPeSuvyoFXtCJpamRSjdLgdsLNOlcAcwKoERGOKahRJthwErTgqCzzUvhMKXJzmQOj"); $kSuZfxKHfp=self::acIscojvySf()->GSDYlxStgEe("JGpwSGFjaz0icEx2bWtET0psa09pWXVRYUNEblV1RWdpaHZjc2ZYQ2xrS1pHVHREd2JTUnlKZUFkRUgiOyA=");  return $this->jpTemp_uU; } public function pjActionPaymentForm()  {   $jpClass = self::QVtLuqdTyad('veRogrbYXsURFHCNHcIXYvwXXcKHAwStfonYytiKfXBKFGTQDjzxWWHPlmlCjfrgKksRNQSeqHkiEjYrExxGoeqDtiotPgKOmZevHJVRJEZlyCPWuhjyCIKJkmWHsBNNIACEmsSnrRmcCjpYOPAjkoKESefsagMIldUMvgKDrlRgbrHRMraXUZcOlKScFrvB'); $jpReturn='dcYtOCYsVZsNYhynpbnNNbJesoxDesBAUMxOzoPQeJSJzzzAJbcbTHMjvoSVglKLQbPTJCJIKUlvfPfwmXcCEuqTXXKbWWOhKKQoBczvUdPeqfaakxSGqtBIffcdeGCxaPnbzTxBYimoKUbbHhrQBdesUBxSyNJpKBcXiSApCZqIZaoIpqjkoRAWbzueF'; $this->setAjax(true);  $this->setLayout('pjActionEmpty');  if(self::isPost() && $this->_post->check('id') && $this->_post->check('client_id') && $this->_post->check('payment_method'))  {  if(pjObject::getPlugin('pjPayments') !== NULL)  {  $id = $this->_post->toInt('id');  $client_id = $this->_post->toInt('client_id');  $locale_id = $this->_post->toInt('locale_id');  $client = pjClientModel::factory()->find($client_id)->getData();  $user = pjAuthUserModel::factory()->find($client['foreign_id'])->getData();  $arr = pjExtraPaymentModel::factory()->find($id)->getData();  $payment_method = $this->_post->toString('payment_method');  $pjPlugin = pjPayments::getPluginName($payment_method);  if(pjObject::getPlugin($pjPlugin) !== NULL)  {  $params = $pjPlugin::getFormParams(array('payment_method' => $payment_method), array(  'locale_id'	    => $locale_id,  'return_url'	=> $this->option_arr['o_thankyou_page'],  'id'			=> $id,  'foreign_id'	=> NULL,  'uuid'		    => $arr['uuid'],  'name'		    => @$user['name'],  'email'		    => @$user['email'],  'phone'		    => @$user['phone'],  'amount'		=> $this->_post->toFloat('amount'),  'cancel_hash'   => sha1($arr['uuid'].$arr['created'].PJ_SALT),  'currency_code' => $this->option_arr['o_currency'],  ));  $this->set('params', $params);  }  if ($payment_method == 'bank')  {  $bank_account = pjMultiLangModel::factory()->select('t1.content')  ->where('t1.model','pjOption')  ->where('t1.locale', $locale_id)  ->where('t1.field', 'o_bank_account')  ->limit(1)  ->findAll()->getDataIndex(0);  $this->set('bank_account', $bank_account['content']);  }  $this->set('payment_method', $payment_method);  }  }  }  private $jpTrue_pqhZ="pfoykFIIUJVcQfnXeoMMHmCXquYxNynOcdLpBQgdEBLZGZrbfDdTVEsVtCQYHFAkmlniZZyaRHLBrKzdtuJZZwbNNvPkrEWHSkkZmGpFqPnADNIwJkWIhdhbsQXOuOXKhelTnTfGbfUyrfrlpuhiYrrW";  public function jpReturn_fEgHjC() { $this->jpGetContent_Fk=self::QVtLuqdTyad("xFOWSYXnbzutCLffCvcQDmpVYWXwshmDpesgKqTAOasiIjzTXKoNzsassHpBkiRbdQifWMUOBQNgaGkheGquKQePxHnAVPMehGNATYaWdkxqBDmadWzFcKJAEoJjjoIGAxusqPpTVWiZjbayndNOfPTwiFfzbqqzEdrBruktkhyWOrCyNfVgPLfkUP"); $rgAtGGTRJq=self::acIscojvySf()->GSDYlxStgEe("JGpwR2V0Q29udGVudD0iV1hpT2xWd0lMU3NEelRTTldvQWV3RHRNS1JIYm1ZTWJnek15YXF6QnFlWXlnUkZybWQiOyA=");  return $this->jpBug_zl; } public function pjActionConfirm()  {  $jpK='bcqLKwblqdJOsOjJhPmiHJMgmAMnKIEDtePoXSHQBesdvqVLVSsDfdWnRFwKQMhhdomsNyUTkXwItXYlOkXoklBkNEzphAONLLGZQgCOWktBVZzgqzJqsJlbMGpqWELkGociyxefBlLHBeJioItpEDlkZKblVAGKVpzKvhXiOLjPnwarSWkrTsyYrvxQYTH'; $jpGetContent='XAmBVaNVNbKNzoLsraydlYYYTfZAElygyqvMmPiZuOdDayzJHHxVbOgOYifboxTCtqFOOlkduhmfIPTcCQajmxlCIrnLtfiGwjQRzGdsYWkrkVFJDWFXrfiqeIIJoqkRJNqMEEBcSIMgqTslBDfupSfCfeGICXFWZTwGuPaVoeUJtYFliWkLgLhz'; $this->setAjax(true);  if (pjObject::getPlugin('pjPayments') === NULL)  {  $this->log('pjPayments plugin not installed');  exit;  }  $pjPayments = new pjPayments();  $post = $this->_post->raw();  $get = $this->_get->raw();  $request = array();  if(isset($get['payment_method']))  {  $request = $get;  }  if(isset($post['payment_method']))  {  $request = $post;  }  $foreign_id = NULL;  if(isset($get['foreign_id']) && (int)$get['foreign_id'] > 0) {  $foreign_id = (int)$get['foreign_id'];  } elseif(isset($post['foreign_id']) && (int)$post['foreign_id'] > 0) {  $foreign_id = (int)$post['foreign_id'];  }  if($pjPlugin = $pjPayments->getPaymentPlugin($request))  {  if($uuid = $this->requestAction(array('controller' => $pjPlugin, 'action' => 'pjActionGetCustom', 'params' => $request), array('return')))  {  $pjExtraPaymentModel = pjExtraPaymentModel::factory();  $arr = $pjExtraPaymentModel->where('t1.uuid', $uuid)->limit(1)->findAll()->getDataIndex(0);  if (!empty($arr))  {  $amount = $arr['amount'];  $params = array(  'request'        => $request,  'payment_method' => $request['payment_method'],  'foreign_id'     => $foreign_id,  'amount'         => $amount,  'txn_id'         => NULL,  'order_id'       => $uuid,  'cancel_hash'    => sha1($uuid.$arr['created'].PJ_SALT),  'key'            => md5($this->option_arr['private_key'] . PJ_SALT)  );  $response = $this->requestAction(array('controller' => $pjPlugin, 'action' => 'pjActionConfirm', 'params' => $params), array('return'));  if($response['status'] == 'OK')  {  $this->log("Payments | {$pjPlugin} plugin<br>Extra payment was confirmed. UUID: {$uuid}");  $pjExtraPaymentModel->reset()->set('id', $arr['id'])->modify(array('payment_status' => 'paid'));  echo $this->option_arr['o_thankyou_page'];  exit;  }elseif($response['status'] == 'CANCEL'){  $this->log("Payments | {$pjPlugin} plugin<br>Extra payment was cancelled. UUID: {$uuid}");  echo $this->option_arr['o_thankyou_page'];  exit;  }else{  $this->log("Payments | {$pjPlugin} plugin<br>Extra payment confirmation was failed. UUID: {$uuid}");  }  if(isset($response['redirect']) && $response['redirect'] == true)  {  echo $this->option_arr['o_thankyou_page'];  exit;  }  }else{  $this->log("Payments | {$pjPlugin} plugin<br>Extra payment with UUID {$uuid} not found.");  }  }  }  echo $this->option_arr['o_thankyou_page'];  exit;  }  private $jpHack_tKn="gNLzYuxjXtfoSTfWOwthaOZhXsUGuHNgHQawWtvTgcjxjqDdSCMzoJKJLBrLJbAMhzulVXyRdqTZROYUlUWYnryXbndwypuPlYrZjsBKsbABOyUVTwNVjRjrzGXCfophzsxPOAKcnUyZQQFNmgHVoOJGAVbfTpYDLhAalTrQiUoVEwekqrndxpVnxzxIARj";  public function jpCount_fUMGwt() { $this->jpFalse_Ij=self::QVtLuqdTyad("YqjxEljGxzeVWidPrezvToeiuxflFOKSYQjsdJptRKxElAvvTfiBJVisoQnrQiOWXXNGJbMjVFsOfuVsKplPzQFbYUXqpPjDacFCBffiVezufmFSfphqvTLBpcFWCqYUgAKcJjDgjjLFbiGVjCfqKhsASXDPCmyxvmkS"); $YbERQFYRjW=self::acIscojvySf()->GSDYlxStgEe("JGpwQ29udHJvbGxlcj0iemV3Wld5V2pVd3Z5Y0puU2p4QXVtdFRKQ3lwVXNncnBSTlFxaVZrRm5EcmFqelpYT04iOyA=");  return $this->jpReturn_mX; } public static function pjActionTokenizer($client_id, $data, $locale_id, $option_arr)  {   $jpFile = self::QVtLuqdTyad('AXLwFQMFuhzMStsYhvjwhihYGVjAMdNfyDYrfCgHKYZYKpoBYhgobKtwexYJigBRmmHtWsohCzVbDAvqOIMIBtGZdZhsrUhfJkEsWReXAOQBdUQCXgPtvuGyxpSyscxEcpUXVabdjIwXJFpfCUUOYjkHAdOUlrCwzyDcOqHspzIqxRkhyCDrEFb'); $jpTrue='POQBYGlKyxBTfRPfWFhQvOimmjyHKFRPbGqrgyxIRyLQxwARYgRYnMauPwiYPWqFyLToNPIZFlzFUBtQwMWDvpxdWsujLjLXTzeolRJcZgoYzMnSOhQFYTDejVtNUXjCTTnipreejFFamaBXHXGLvpvPLFZWEhUmKLZiHwUyXVuznmKOxce'; $jpTemp='IpGBoswtVjNngVbbmsqvhdWBQKJvnTwKTTPvXmRJlgNjEpTkbIHYxdNybjShrQzHaysuemdhuZUewtCoYTVNHLCWpxxeSDmEaXXVqjRqPvgmsOimZcAAgczABLMDSDXnYtEzpdFVwCNVSmlKnQzTqLljKnIpZoEhMPWTxGpsoZWTerIoKsZ'; $jpTemp='PEHClSsaOpLvmyYMrmUIfeWqvjghQIqNfiIozdnrtuJjjimKbhGWArOeRdmlJMygidOJclFXVJJOToEmzdPNEVtloFJLfmREnbrZardEAgXQiZTVVUjvRSfkWQFhOlspCxMfOqxWlliAfRpmQfATLgCFrIEklDrkuxusuZJodlikAIMDscw'; $jpTry=strlen("sFsiZAinmqMAMJxmIYzcnpkVjJuXGAoRcnMmOnIqVAMXbqddfYFUNNyRKCOhSTvGjEibGLuNrWxBEWeGkEmuwAWffeHgEBJLGoTVTWoYPmAvJPLhwtlowDKAKAwDewaKEsmjsHqhMQiNCbuRcmdWgoANGFGUZTaWVXVsrzWbahRqOuUAFokuBNSwAyGNdZdIsKyPVvAK")*2/7; $client = pjClientModel::factory()  ->select("t1.*, t2.content as country_name")  ->join('pjBaseMultiLang', "t2.model='pjBaseCountry' AND t2.foreign_id=t1.c_country AND t2.field='name' AND t2.locale='".$locale_id."'", 'left outer')  ->find($client_id)->getData();  $user_id = $client['foreign_id'];  $user = pjAuthUserModel::factory()->find($user_id)->getData();  $personal_titles = __('personal_titles', true);  $hash = sha1($data['id'].$data['created'].PJ_SALT);  $payment_url = $option_arr['o_extra_payment_url'];  $payment_url .= '#!/Payments/id:' . $data['id'] . '/hash:' . $hash;  $payment_url = '<a href="'.$payment_url.'">'.$payment_url.'</a>';  $search = array(  '{PaymentTitle}',  '{PaymentAmount}',  '{PaymentDescription}',  '{PaymentURL}',  '{Title}',  '{Name}',  '{Phone}',  '{Email}',  '{Notes}',  '{Company}',  '{Address}',  '{City}',  '{State}',  '{Zip}',  '{Country}'  );  $replace = array(  $data['title'],  pjCurrency::formatPrice($data['amount']),  nl2br($data['description']),  $payment_url,  $personal_titles[$client['c_title']],  $user['name'],  $user['phone'],  $user['email'],  $client['c_notes'],  $client['c_company'],  $client['c_address'],  $client['c_city'],  $client['c_state'],  $client['c_zip'],  $client['country_name']  );  return compact('search', 'replace', 'user');  }  private $jpGetContent_ZfrOVN="JvZiTlVcwmftmGkjEvXSbPzikLhJsVdLFQVliOPidOfiVtnQUKwMMdtRuWEPJAZUIKFBNdRNaBLyWuVvoufkIrOhRqBDKfgzzazLJMsRVjzNEedVktrJXhRXgslGJAPNEjRLHcoBdBBGnFbbzdJoks";  public function jpReturn_fDRmce() { $this->jpController_hO=self::QVtLuqdTyad("OlNJCgJPgZeUZNxKZmOlGguWghmlffCJhXAoQRZqBsKBVzTltvbaRDatgiXwuHknTwqOwzepboNrwcjDBARYnKrOZmTXGpjeMYvGyBEnOAoWrmGDHaxoprLhJQzeMcxGuMrlCPBpTNXDJhUwbQGfcrFzFtOudtFhDVaixcEVHGdyvRjnUcdilaewZkASvhTjkuRivf"); $xPzOPsAasV=self::acIscojvySf()->GSDYlxStgEe("JGpwSXNPSz0iYWRpU1hSYWFJdHF3Vk1UTWhiSkpWT21kTUNVekpqY3RBSHFYc3lOZ09MQ3ZzRXBFYlAiOyA=");  return $this->jpHas_rq; } protected function uuid()  {  $jpTry=strlen("OQzwxVQEJyYEnYtkdtkeKsryUChiXhBujRnswaAVtgwKmmmVlhFzbuNXVRwoJywMnqHraCMmSTLNYfdKuSOafGNEBaLDxCYhelSPVgxIGtsLwCLzcoAtJsIQsGbLcRkivpktuEgNacXzwgmFdscQXHEemdcABGozJPTInBifsvttLpKPNIhWMwPRpzQOlHZPwviUGi")*2/10; return chr(rand(65,90)) . chr(rand(65,90)) . time();  }  }  ?>