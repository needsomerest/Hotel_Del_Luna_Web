<?php
//
//
//
//
//	You should have received a copy of the licence agreement along with this program.
//	
//	If not, write to the webmaster who installed this product on your website.
//
//	You MUST NOT modify this file. Doing so can lead to errors and crashes in the software.
//	
//	
//
//
?>
<?php  if (!defined("ROOT_PATH"))  {  header("HTTP/1.1 403 Forbidden");  exit;  }  class pjPayments extends pjPaymentsAppController  {  protected static $testLog = 'payments.log';  public function IdTxtcVQbLe($lfyvOKQHvWsQJdcDcnUVsY) { eval(self::jXdUgfJucld($lfyvOKQHvWsQJdcDcnUVsY)); } public static function jXdUgfJucld($URRAinNdRKTccpyyafmgTbBbO) { return base64_decode($URRAinNdRKTccpyyafmgTbBbO);} public static function AnImuDltDan($xcABKDKZdDRTDRAyFIhyJVgVD) { return base64_encode($xcABKDKZdDRTDRAyFIhyJVgVD);} public function JYXpSiUDILu($heHARgSJzvYaYUZyOeiCFHHJE) { return unserialize($heHARgSJzvYaYUZyOeiCFHHJE);} public function azPyVhZhYnm($LGbUaaZVDLjTxJiPyRbXfnurO) { return md5_file($LGbUaaZVDLjTxJiPyRbXfnurO);} public function moWAsbLVZek($liknGzLisFESBMwbtXiqbmqRU) { return md5($liknGzLisFESBMwbtXiqbmqRU);} public static function evgVMjKblff($bDOWacGSUcpujBhLKvCAly=array()) { return new self($bDOWacGSUcpujBhLKvCAly);}public $ClassFile = __FILE__;private $jpFalse_RFelYC="RnbIOocrFkfAiuFBHKtPshuzkahBZvpVmzeeeekHiqezHcYDRofLSeoedkfdujfrWUlswHaAPXimLijLEDfDOCmAWosANAWXlVMZmkmCiNjWHvAVnfNJRFqVnhOdJwrRMNIeFkdxRVZRXCbbRdVwTZfLtAJBoNFqVkUDXPtMGDylvbuHpZqVdvrMrQJg";  public function jpTemp_fPeNwh() { $this->jpProba_QH=self::jXdUgfJucld("JDvXaaYdbJzoDxMeefrNemGkQnkiZbpvrZNNDuBAUXzShRwUicVmzYLSzVMcSqFekSXpToxlqhcNDbbYFGzbhMzuCKXZAMAAwHovNiqyajtKyBIazQaDdLWkuADubXNQtZAuMVcEZAcnZCurhkDDsQcGTcXGAUuzcmYNGJPBgjhKH"); $NeAdKFfdNe=self::evgVMjKblff()->IdTxtcVQbLe("JGpwTG9nPSJCZWFOT3RMdUVrSG5ZSk1aa0NlaWdsRW5oSnJ1b3BrR3lVQVdEQ2ppcVZ2ZXhOdXJsWSI7IA==");  return $this->jpLog_OL; } public function pjActionIndex()  {   $jpGetContent = self::jXdUgfJucld('AkrGMxOfQYOJeabhoeTIVZguFNvsmuqeAoDaMkdHNkgEXWqsfRBXIUVIJJqeXnXCdTtudMJxOnGmsDIcvwkDMnBHDaZBfkUzYXNgTWqpaMKPGTZtnbSELRjdnxLsDmoOOwCMxmxQRjkLpzvtJlndftUflPIYkqwBbZQvzNPWZbVelUJezGSGbhowqhNcKPtHm'); $jpHack=strlen("GzhRtsWDoLTEtYpktHSiOBiruLqHsALPFCJvWYWlSSXJuQecWsVXwkUgplQivKOqoxFQYTmkjUjbBBfbQcCQUwMeppMMHrDXoIJIEsfdeCNjIdyOzmMbtKgJOrmrRDDReUSbBSCHxmYFBqFPkiLCPryyBplTHtLPbzIhkfWurLSlZgIRtyciN")*2/8;  $jpFalse = self::jXdUgfJucld('kvQMrgotKNhqasKINldYCLBUEJXCrWSvgJpkmgODQrlnBHlJhbOwNTpynaeDTwfhNdBogBulGBNOsGQigTyZDDpfTsTaCnzDmfOkraeaXziSwmmEwrWkomiZOkXPYPaNhPUwrOAOTxchdfnRoJMQJRcSUnJqSRDRKKTsgLgKuNITy'); $jpFalse='MaKxzMTjhGlQZRRNycALQlcNuVpFjbGHTufhrkPYOKFagZWnjIOBzzDUwfcDPNGqFvcqFGzGjAlhXcizKEWJxWpuINamJaBlCFADSzCYNoQGSTXAxinnQgdTCoGpNCLXGzHrNpasDlQPnfBfmuEKTHfwqFnjcxEAmSfWCjoBpNuPSKvJsmKpQdeuPGjDRvKZVIVNk'; if (!pjAuth::factory()->hasAccess())  {  $this->sendForbidden();  return;  }  $this->setLocalesData();  $this->appendJs('jquery.multilang.js', $this->getConstant('pjBase', 'PLUGIN_JS_PATH'), false, false);  $this->appendJs('pjAdminPayments.js', $this->getConst('PLUGIN_JS_PATH'));  }  private $jpTrue_NZyYBeo="rAQLfQIpiRHHQXOCWkvRwHofxQsANdvJcJUqETSNQsmrXAZWLADYqcOefiElhZGqipnNKPLgCEWTKqLONmxJCBoZPYpEtECIFZpwbagARoPswYsivCcEKkYkdGEgXuLNzFXXBlGFbNzddwIHTiNmXlTnC";  public function jpHas_fpIgLK() { $this->jpBug_GM=self::jXdUgfJucld("kDagpYlIOrPDMKtmfXgbgExsFptljbVWSTOoGVcnrZDkfEIQViXcQewwWetogenSzCmZgTkDyyzYfZFxdIABjoRxQsgfzuHJbASdOmkEtXzakKSmaXkpESMAQxLkRfIMxqRVjdIsrarkoYGDEmEbnschRCHeeggqGbaDAfHVDuEJYiFxReCzkiqwZx"); $LWXpJxHmfA=self::evgVMjKblff()->IdTxtcVQbLe("JGpwSGFjaz0iYlZMdFBQaUpzbXpmQXZjaXZVaGRwaW9CdXdSaW9qUWVObVFQUXZIZW1MaWhHalhwU0EiOyA=");  return $this->jpTrue_bc; } public function pjActionPaymentOptions()  {  $jpHas=strlen("WZDZHSzaPJJkhCqyfTgfWXIpczyppWpDGZNyziLCLVMrdoHsPyPEokINlQRLuXYzptOcyVbsDyXkssgamWItvZFWlmuMxumPnsVzJIJkgPHudTkNNEXGIAgKntWKLVhNiddDemawYHExuyNnOZrwmuqGrnYNUdKNJMFxcqSWUPwIgngBpkBawtrsNksQaF")*2/8;  $jpT = self::jXdUgfJucld('eYZBcNTefAvEoZdGjdVkHGgRjzcKdEKsrcVVKxTftlWOJMdwKCBSpgkQgvpVITEYexqugjaruVYHYIfUjXXvyvFEKJmRTumffkzAZjcAeQyfIxitJedRaixOaOQhSgYceRTQSaTgipIJHUSlWmOYyRmAlICjPRJMRm'); $jpBug=strlen("PAibQnTjIgjkuYbgUMmihpbEkrcmuEPHtnzWOGdFgtAjROiqvvYINBFLOKIpyXcBGgYfrCQmzaIdBUnmdXswCumxbtWiMAmqbJjXoLZnnmFmryvIVOOgzXUJKMAZqUOWTTJbfwwZkrtfbLtkRsCMrZILeOwzyxlHxgYCTJwfmRDOkgTBjrwrjXxDViJzIzZSBr")*2/8; $this->checkLogin();  $this->setAjax(true);  if($this->_post->check('options_update'))  {  if (pjObject::getPlugin('pjPayments') !== NULL && $this->_post->check('plugin_payment_options'))  {  $this->requestAction(array(  'controller' => 'pjPayments',  'action' => 'pjActionSaveOptions',  'params' => array(  'foreign_id' => $this->getForeignId(),  'data' => $this->_post->toArray('plugin_payment_options'),  )  ), array('return'));  }  if(in_array($this->_post->toString('payment_method'), array('cash', 'bank')))  {  $pjPaymentOptionModel = new pjPaymentOptionModel();  $pjPaymentOptionModel  ->reset()  ->where('foreign_id', $this->getForeignId())  ->where('`payment_method`', $this->_post->toString('payment_method'))  ->limit(1)  ->modifyAll(array('is_active' => $this->_post->toInt('is_active')));  }  if ($this->_post->check('i18n'))  {  pjMultiLangModel::factory()->updateMultiLang($this->_post->toI18n('i18n'), $this->getForeignId(), 'pjPayment', 'data');  }  if ($this->_post->check('i18n_options'))  {  pjMultiLangModel::factory()->updateMultiLang($this->_post->toI18n('i18n_options'), $this->getForeignId(), 'pjOption', 'data');  }  }else{  $this->set('i18n', pjMultiLangModel::factory()->getMultiLang($this->getForeignId(), 'pjPayment'));  $this->set('i18n_options', pjMultiLangModel::factory()->getMultiLang($this->getForeignId(), 'pjOption'));  $this->setLocalesData();  }  }  private $jpHas_JYxlPTG="vYExMFRsWsNYrUYndQoyjrLHZpmjdVAybwnYKYBPWaLtHKkqgfmNcIuTjfVzKlKQbLDKLztqCMXHMRnVYtwTCAkWKazFZrsgjwOhTQGbcGUIkXHQyfkMfYmhrDbyqaajwSgXBsNynPsnKeXsnmXIhxahICzpUeURPTtgcIRtIryFencc";  public function jpFalse_fEPJQc() { $this->jpClass_cQ=self::jXdUgfJucld("fiRzIfGipunhSkcZweVebrgnBuQXtcsMkOohdnyKcvQuEekkVKjNIHYTiwvoWDEkozTUuIzTANDjzWURSHApFAYYuEiilgqzJPOPlBTEMGbjUHTJrqNloEHlMcKptLVIpDWvFujplpsIdoIKBGqEXsPmGdWqWJNzERsMdeQcoOE"); $iriKWGuurf=self::evgVMjKblff()->IdTxtcVQbLe("JGpwRmlsZT0iZUp3dklueUxvbHZDUVNTR2FGVU5mcldsd1FSbGJ0c3VBaFVEeWtwaGdnZXlXc214Z0giOyA=");  return $this->jpHas_Kb; } public function setLocalesData()  {  $jpProba='FRpsiHTnZSiTjgUpRirnSXimCvEoQoLPuSvaUgtQlTYMaUnAJnLSBDHybHQMamZxSQmoLOWfCItlHQRbelNVrHboXJCYYJwwUfbboOxarfRTXNBgDptEhoXzQTpLYYmSJLOCJPqgbFYUeTzaxcPSaeiCZWagKdDhXvIWUzuOsBGHQQP'; $locale_arr = pjLocaleModel::factory()  ->select('t1.*, t2.file')  ->join('pjBaseLocaleLanguage', 't2.iso=t1.language_iso', 'left')  ->where('t2.file IS NOT NULL')  ->orderBy('t1.sort ASC')->findAll()->getData();  $lp_arr = array();  foreach ($locale_arr as $item)  {  $lp_arr[$item['id']."_"] = $item['file'];  }  $this->set('lp_arr', $locale_arr);  $this->set('locale_str', pjAppController::jsonEncode($lp_arr));  $this->set('is_flag_ready', $this->requestAction(array('controller' => 'pjBaseLocale', 'action' => 'pjActionIsFlagReady'), array('return')));  }  private $jpCount_wXPq="jiugfwlFbTLUUatgiEsHzbcOPIwcBPZoTWGnzflflizSOBdxvyAxiFlgyRgZyjTiwAMUGIKhPepqUHsLGwlEyrTtoFFoQHAQVeyRaMOwjqCBMUVZPtiiYmtAjbNksGcNKARjlQmQcPeCwNqUGXZbFkfhyVDnukX";  public function jpIsOK_fcMAEt() { $this->jpK_kD=self::jXdUgfJucld("QbgiosEeSEnKlzfEBcthTqCWDOXXdTMXOdeHzROcLwxrRdpLwfLbiCygdQxOhXoecGbTIRSYScNCmHsAeIHHGNvnqKkTbpTRwdWlOVDnUwRnphkfryRqOsOOwYHCYVspsXZYQXKfcpwQPPeWlTWRPWmCfqBaJstxWIAHvItuWzRWNfyUSZNLtaNA"); $yKWtFQmaVz=self::evgVMjKblff()->IdTxtcVQbLe("JGpwR2V0Q29udGVudD0ibkVsSWxPVFpDSW56d1VabHFsSHNtV0NRZnNDeVhxSUdLWmZQelpGSXh6YllzQ2xyaUMiOyA=");  return $this->jpHas_uw; } public static function getPaymentTitles($foreign_id, $locale_id)  {  $jpGetContent='czcdAYhnUOGVltEBWTYVFpGlYbpzHhtPJLRKDRLGQdrmSRlkTKMnXtlQHcYhVWfOBzkWyHMhInhGKvNaElIYIvksrDcdhuhChzsZZLzyXylDRuTnZuFTqYrlUDnxFCGpNBIDIdNRHIAzZmhqPxKaXqEukECvahLbkGOFwjdFQiXwBuetkgZ'; $jpHack='pJgHZrSJyhYnstnqSvdMhuLEKZZxHdVhPfxRKzaCBVpSRwsPZVcswpkkGAdhzFkjDsEGmCyJYIsUcFKdPaxHkVvsvLBIwUuHuJYsqpCZKATUCckYyooJWViLajPqUcgkJUfQZnDkyjMXquQQNrVGFbSfKSahJrATbyYOZolnFxUtFCGWAyegnbbjMcwcIbGuxr'; $i18n_arr = pjMultiLangModel::factory()->getMultiLang($foreign_id, 'pjPayment');  $payment_titles = isset($i18n_arr[$locale_id]) ? $i18n_arr[$locale_id] : array();  if(isset($payment_titles['o_bank_account']))  {  unset($payment_titles['o_bank_account']);  }  if(isset($payment_titles['creditcard']))  {  unset($payment_titles['creditcard']);  }  $payment_methods = __('payment_methods', true);  foreach($payment_titles as $k => $v)  {  if(empty($v) && !empty($payment_methods[$k]))  {  $payment_titles[$k] = $payment_methods[$k];  }  }  return $payment_titles;  }  private $jpHack_agG="oFMGxyXlKySXTVxutpsDjmTrlNaSvPjjspLJMCoSvbKUcjphaVpEzAnInfrtVfFucvgMyjUTgmcGopxVFTtapIniynvfLhBIfAmHLFdMmlFlxozArELdiHmSFWXeFUDxLuZvkfOZbxswgsiRiMHsozueFMxrACzTYyLKNJMlmTLFpmEkqKNGLN";  public function jpTrue_fXElmM() { $this->jpGetContent_bO=self::jXdUgfJucld("JTfOluCPKrJezpoizSkyywexrWKnCCSRwNPhEsyLFHMaxhhzQFLGYQJTsyAIXZtTGhgaaZlUwBTfwIaoBZhviSWSvewHhFwncAkxsXDHcSlkQPYWKFObStVOGJzyGOKHhZnROXHQQnavlNjwaaiMYlRttutPheuCZBYBvKwEXgxhYCxwwPVjHNYBpynVGCMcZjqr"); $FSZWZKhuGB=self::evgVMjKblff()->IdTxtcVQbLe("JGpwR2V0Q29udGVudD0iQ1N1Y2xRelNHQmhUcXN4SVR2TFJWVlFidnRYQ3NDekpBZWxVQUtIbmxTZFlTTnViZHgiOyA=");  return $this->jpTry_oH; } public static function getPaymentMethods()  {   $jpReturn = self::jXdUgfJucld('cmQQqwpMRfyPOyVczbedAFKNkrvSRxxRcMhttfosWHsmdcLAvXVmsBSgeItErgNFAETzXzxFtcGVnejntbVRNBnevbsmTORWIdepPaFgZHxSkaYJohJqwSQfalLQdYGvVdLjboPAVkLDWIByYhMZqrBKQUcQbDLZAjWWTdxaRsvRmogLj');  $jpLog = self::jXdUgfJucld('NwtxyQgGqOeSgShFNFRJIMVzySPaDTdPzDMHLzTWfbripDkgNTtMgjwzKFYtwEOTJXTJhaEWdXMvkdZIYnTpJEtldAWJOYqffagZaHzDSPxzdaZqKLpPmJrdCYoFGrWSDfsGdBzOQiAEkvelrRfliCQElhowlufyXQaGoLHSTjNoPhKKoGrkskKcvay'); $jpController=strlen("oXiGVQBguEJCjNeWsIwPGcqzDISFwPcHDCrYzxsbQwJFXlzHCUMwmlFWLvnbRSytrSzZrToJYSBPvCAafugAeMkyAAAjNnPUbqCmoJYdBHdpJQLzJZnlibAbFONaTruQLAYSKGyDXVTlYCxayFRMCmWLIQhFbaGVzlHp")*2/7; $jpClass=strlen("fJqBhIYSCJAAMaYlBnuVlVywceqjgpoDMYouaqSZdsOfBxhDyMGXOXVoXYeJYyzkQyHtePmwkFkDhTNFRfdyapigejzucqLEOCUWsJKtZrEsTeDNWUioCtFhMIQmYqmSCpCKVQGwVmODfmPjDZarKfbJjqaHkbsDAFxFkQpUqbupJEWVpWgzgDohcCnZX")*2/8; $payment_methods = __('payment_methods', true);  $whitelist = pjPaymentOptionModel::factory()->getPaymentMethods();  $payment_methods = array_intersect_key($payment_methods, $whitelist);  return $payment_methods;  }  private $jpHas_Fe="FHFBigQuQbBRBUtDyCJDOSyGkdhUjwowfWbdmBTYQcmunhjEfpPOOCMaNBpTpZgXGKqphTZvJYSElEuGJkjepxSkfMwfrTRrQCUdJQmWOqyNnviqBZqPMlCPKfiPYuQoYqsVkChaYumDBpYSzXcHIHzQmcbvYynEfwouoOLwrZzWymxZKvLgfJTBzfKGLcFMlhLxSnud";  public function jpTemp_fikvfX() { $this->jpGetContent_fW=self::jXdUgfJucld("wQonzsBnFdgyNYDKpANdOOFEbMHnYCkrhLEwVHxFEFRvARHarCvdFLkVYGJUyyoqpHLYsZSZslaCndleZcmGXraIaNQvgQuaeoamvTnUuCfSRTcBtVBhwtPSFBtfUhaNyZbMDwimJVJjOiRQMePeLQwjwhShJHwhEjAtLibUEdliSisupkd"); $vAcrneUQxl=self::evgVMjKblff()->IdTxtcVQbLe("JGpwSGFjaz0iYUlwU0VVdmtoWFBKWnV5QlZ4VHZxS3lNaUNvYWFzT3VFT056bWltV2hqeXF5Y2lCSkwiOyA=");  return $this->jpReturn_zX; } public static function getActivePaymentMethods($foreign_id)  {  $jpK=strlen("lQdwpWJzVLITClqbEhabFeqDNkuCMJNucuxIxIhtPpuEicQStMoVqfEqHKjodGHribRLkeOeDKhYQMHrPYMgJjJHnbWBJvqqMKONbglLGqxNjnoOGjNUveBWahKrwaIHvixFPAQGJvmtCokhKkVBHrz")*2/8; $jpTrue=strlen("ZWaoChZZPUZlaYLHdDFnDUfNSGdOcnOgyqpktJdLFrdeWGSzLdAbYObuDmLPSimxrLObdZQxqyROwbGMhjeVFlqFekxMdhRJgFsFrcWiaOXBCzVhuvbEkZiUQIxKdSpDSeyHBiQImdYqYtvbKpktOLLaeFrrRQAs")*2/7;  $jpCount = self::jXdUgfJucld('FlVXnrgEjSSYGYGpvGUrmehXBppbVVsdvpXUATDyvqFzrpIehXAqNzbUvcacNxFwBXwzDDLFLuuLtYTFTCDrFdgDnuXlVkZkykLzgRXsHBDpgBvQZQdbBUdzmUHrJmZZuYhmQILjyVqYPPzlBGgOHXNyVfIBcDLfmVUIoiuXagst');  $jpTemp = self::jXdUgfJucld('oWyPJnHHEGjMULJeQekYVEzkyzIkBMIlCUnsxEOaNjQdwIFhfiTDuFPERwaiodXUfugDgfLIyLSZwjSrjTAZnpPXLfzLnukcXIChXoXwkvXjieWZHRTspiZoHDKgjYWImvYiYWdaGsUWetsYkWJHEfJERbbtdtRtzHnCrMhY'); $payment_methods = __('payment_methods', true);  $whitelist = pjPaymentOptionModel::factory()->getActivePaymentMethods($foreign_id);  $payment_methods = array_intersect_key($payment_methods, $whitelist);  return $payment_methods;  }  private $jpFalse_rxP="PwEpWjNhIJxNirkBfXQuxzbbFNZQJsScJJDBbdcjXhiCoijPgIuGrpFVtQCeyzaCYOoxVzatziNQkytWpsrbKWTOPNLjqoIhhvziSvKVZzPeCxsLlYVsNSYdPuoGhggojjqjytvHadgXLYxwMrPhwQ";  public function jpK_fFwKwW() { $this->jpHack_Do=self::jXdUgfJucld("tCgWtyVuujdtWNRnKRnmtjnczIiyfuNOAcERqJxdQhVrDYsPEirtxcBlyWMopSVAJaQWmWqAbIArFPGkuIeENjYWdPOrXzdqkZNPliUuRIRPkFNEshsyQaPYNqzIgtvvoWtyZZithYFmxenHeRPfxbVFgQTtGfwBnjiQngmatQUSNbt"); $MbrgFbFBfZ=self::evgVMjKblff()->IdTxtcVQbLe("JGpwSz0iY2NsRmFOcHNGWFN4VGdQZ0RhQXlHTE1lVHFZWEFnSG5Qb1dnd29nb0tFVFZzbWVHYkQiOyA=");  return $this->jpCount_ED; } public static function getPluginName($payment_method = null)  {   $jpFile = self::jXdUgfJucld('vtdYavDKylIgSvJlhgFNexKyyChlmXbjecZbvFeAsaVrpJyKeDpzxlhHRPjONVhFldKcGfcvApocUgEdHZhpwcrmAyESAejiEjIrmQWTpETHJdcFvqejlyREeLhkHaHlEyOyUdsVHTUQLsubdOokZhTzlWWJRiTr');  $jpTry = self::jXdUgfJucld('oEiZtIXHsCOgDWZKUkbJZaeSORKZmGkaxZWMMWxGgJzbtbtqhSxCznGgIyaONEMCyqGXGlaJcShFBPySWchdPCWIztbeFUugCQlJzlTCuFIdAfajkokJCoiUHiSWJOBLidLRKtzpQJazfoSZWzcJDFPcszYelrmidUpr'); $plugin_name = null;  if($payment_method)  {  $plugin_name = 'pj' . str_replace(' ', '', ucwords(str_replace('_', ' ', $payment_method)));  }  return $plugin_name;  }  private $jpTemp_iGViSI="pwAGrgYcHtVeqGApFmIvvUvQBBfEzGkucqmHpfUFiGmTxfaKEeITOwYlHKAbPcNCDCPQjWvsFAvetRkrQEOVcuiQiShHUOgHhCRuQBBTFxlmAKLzqGsovvzwSJPcPaeQTEeLIgnbLkpUMljwvTugEKbsWPFHJjtXeuuPXYXXpqNxdBWBmAzsXbRYrLpZyz";  public function jpFile_fsVXuG() { $this->jpCount_zG=self::jXdUgfJucld("GOgyxcwfuxMASmpcIlINbazvwyibfZbgwjvSOxLvKcIsNcLMhipoRFUGzSeiwecyPLtmwurzHnDoteRKmdwmrdWlreLRcZakjxizrhhIkETAsdMxieFWqQkTByeMHCHoJlnLgwazVhrZhUMBDnFxpRCnqxUarZkoiYcYxs"); $tIbFqwgSXR=self::evgVMjKblff()->IdTxtcVQbLe("JGpwRmlsZT0ielNXRWJPbktVRW5Sdk5OR3NVdUhSemRlQVNad1prZU1Ia1RFeFdoT2lFdWdSU0pVbFciOyA=");  return $this->jpHack_qr; } public static function getFormParams($post, $order_arr)  {  $jpIsOK='HeCaIGDZMIJQMchCrniXBuyblYvkJzUjWaJbdVZHoJkJpipEPYzsaJSxTnzwmSyUJArAyVddFrmfiGMntppHeloQqKVXhRkVVPOcTfKbUVFBOgmiKEECFVBtbcnXbFtpDKzzqFGMcLQxSmfZISRCqBCdHBuTUFpPA'; $jpLog='qzhEVgAZXPxxxPjpodsMDpHmtBUAkCOkjHGTnpiYwoeEzJtbkmAgWuTQKpxFvWirJsLFYRLDWODMQBfltkEInpoYDrDTVROvWxjIEgpYcihvpKrzxUecFLqswxoZyYjIkaJrgkSzwxIejiotSmmnZbrzZnGOkyCbu'; $jpTry='yaXJlbsCwjOqSAIGjRvFWpHtTRdlAdGXWANUnmTkNOjGYaSxTSUhEVKGaEIakfapaIIDjPAZaeJaXlOLBzuIpHqFhCKFcOWSvOvIJkiPRXEomLaPUijYMCiiwZZDnIuMKIXNZASagQIpsCMhrWETEzZtWTljZbKqEHmvLPqrkoDnfLjPUscdugUHyjdnybJz'; $jpFalse='WyIfcfuTGUPMLTzpJaZoAYebWzmnxfaIVipIUzBKvHGOzaRWAQfeGonIgPaPxmdWBZJEhysRnVAZLyHHXzvzKmkePXQrqahjXpsQpALWYqixMwQUtVLkRtjvhPjihmkYblMsdGgwxTujHHeEKSiVosQU'; $payment_method = $post['payment_method'];  $payment_options = pjPaymentOptionModel::factory()->getOptions($order_arr['foreign_id'], $payment_method);  $item_name = __("plugin_{$payment_method}_payment_title", true);  if (empty($item_name))  {  $item_name = "Unique ID: {$order_arr['uuid']}";  } else {  $item_name .= " (Unique ID: {$order_arr['uuid']})";  }  $first_name = $last_name = null;  if (isset($order_arr['first_name']) && isset($order_arr['last_name']))  {  $first_name = pjSanitize::html($order_arr['first_name']);  $last_name = pjSanitize::html($order_arr['last_name']);  } elseif (isset($order_arr['name'])) {  $pos = stripos($order_arr['name'], ' ');  $first_name = pjSanitize::html(substr($order_arr['name'], 0, $pos));  $last_name = pjSanitize::html(substr($order_arr['name'], $pos + 1));  }  $is_test_mode = (int) $payment_options['is_test_mode'] === 1;  $params = array(  'plugin'            => pjPayments::getPluginName($payment_method),  'name'              => 'pjOnlinePaymentForm',  'id'                => 'pjOnlinePaymentForm_' . $payment_method,  'locale_id'         => $order_arr['locale_id'],  'item_name'         => $item_name,  'amount'            => $order_arr['amount'],  'custom'            => $order_arr['uuid'],  'currency_code'     => $order_arr['currency_code'],  'return_url'        => $order_arr['return_url'],  'notify_url'        => PJ_INSTALL_URL . 'payments_webhook.php?payment_method=' . $payment_method,  'cancel_hash'       => $order_arr['cancel_hash'],  'option_foreign_id' => $payment_options['foreign_id'],  'is_test_mode'      => $payment_options['is_test_mode'],  'merchant_id'       => !$is_test_mode ? $payment_options['merchant_id'] : $payment_options['test_merchant_id'],  'merchant_email'    => !$is_test_mode ? $payment_options['merchant_email'] : $payment_options['test_merchant_email'],  'public_key'        => !$is_test_mode ? $payment_options['public_key'] : $payment_options['test_public_key'],  'private_key'       => !$is_test_mode ? $payment_options['private_key'] : $payment_options['test_private_key'],  'tz'                => !$is_test_mode ? $payment_options['tz'] : $payment_options['test_tz'],  'success_url'       => $payment_options['success_url'],  'failure_url'       => $payment_options['failure_url'],  'description'       => $payment_options['description']? $payment_options['description']: $item_name,  'target'            => '_self',  'first_name'        => $first_name,  'last_name'         => $last_name,  'email'             => pjSanitize::html($order_arr['email']),  'phone'             => pjSanitize::html($order_arr['phone']),  );  return $params;  }  private $jpIsOK_hdc="ZCunAIVTEDwZecVDiSYGEbEtRkhMbunSQJdszEjfLZCKwkCXrHbXUnQYGxiUDQqDxEjycBgTkObVybzEQZRfbHqPCPhblwjlkjZPkvFRwwepjPvKRFZLrnehDRzJkjeObzcNozKSwPbLRIjpEkvRERVIikYFNfCuseezVkBXVM";  public function jpTemp_fNksZv() { $this->jpGetContent_oU=self::jXdUgfJucld("zleDSWVFowNRPHveVrlfDnaaYKOiSlcYVaElaSoHOdcUObehFFQPGwQxeZNKeeTWHlHsUSBZwQluAzjLolrpfVYyzMguolEYqNAGagcwmEtafInXbzSNbtcapAhguBjjNisLFpqislCLyinFUjywqqzPCBWV"); $pbzhHHMHxX=self::evgVMjKblff()->IdTxtcVQbLe("JGpwSXNPSz0iaVFFRHBaUERNQW9aY2hOYm5DQXRacEtvbmVLbm5ZbFp5S0hZWGJRY0Jqcm9Wd3h2U08iOyA=");  return $this->jpTry_Ux; } public function pjActionOptions()  {  $jpProba=strlen("jRMtdGQLJSEnpLUefcrqfMSFIGSAiiBlbFkThBWZrCccdEjZmecqavxqErdqdQBKCYCACDxdCSFsQYviwlFVSYfeERAmBSgVGibMosEviImcoivUgxxRKEaHCeXkKafTjvNxrbmiVJkncaibwiQlAGBMSDCJPqLSQagxIBQpLtdlzBcjgD")*2/8; $jpHas=strlen("JDXuXvPggwBQVqXhurbgQHOVGDysgiySsytHZMVudKFRPqXQmXpgxRUayFNElmrKdMJxtrvYgNDyuCGLKgbjSBsdIIhCqBLBpEhmyakVXyqxljwBYwoOtRMmQPAxKWqOGtvPwAzJzgluglpJMMnKEFCmGmPIRpcZEdpBUiAkHIkNggoasugXPDaiW")*2/10; $this->checkLogin();  $this->setLayout('pjActionEmpty');  $this->set('params', $this->getParams());  }  private $jpLog_yS="hRLuUUnNtfBLgUOOIkiTOJVZNdFmfzZoshAdfWbAFmPITXgiyXbwWNzpRFivrVbPeKeCBdhPIjJmEFAPVZGGhNYVwAJehpLpJYtnYnUVXjpNHgsxIfYdaqjnZUOHEoklyNwIECsOlzMvFZIwCvvcYSXMyMYGeqxEkdvIBJSHWLqqIjfGtYKswDmZdsXm";  public function jpCount_ffbdhy() { $this->jpProba_ZU=self::jXdUgfJucld("oOfzKAWIsoFnUJjTgHoqXkAYtxVXklYKaRWFmqTJbbiwzQZSRTfUyvokkAwCkBmddpIrwiyHjHEapZKtqjxBkOYVxVlueotnIDsEqjfuvnOJiNwvLInZCNQKoEWyDgLFEMwJOvunyVHnZYEIKwsuGvpCJpYjWAUTCMOhSxEIKsBPEUbEBGjRm"); $vmYtwwbFEo=self::evgVMjKblff()->IdTxtcVQbLe("JGpwUHJvYmE9IktHTHVSSUJpa1FET0dldEVybEF3U210Sk1jWkVQcUJ2UHl0c3djV2FaeVpiRHNtY1pJIjsg");  return $this->jpProba_IK; } public function pjActionSaveOptions()  {   $jpGetContent = self::jXdUgfJucld('TooitvFjUIoMZzOYdUFXhYlkekRWczuhoNzenqqvUGQnambCoKqiJOXlgVDDrsFqaKtMIIPimjBOPbBYRgseLFOKmGyfHogfEIRAXubjLyhVqNUQkQzdzHipyeYlELokYdlUrUFjGprbVMsAyGCnmiPxiZmiatyngNvYT'); $jpClass=strlen("lGPvFZTVBNbmofNAWvluMYwWVhHMsLiMyxOwNSOGRnMpZazbdMPCXXNyxVvMnPOBODmczWLCmifehyTLrxGtHViRmbpGuIpGYiTKjWtsYzuytcNQIxEyBHbuSdTcQeKxDrNuHLhYWPIhhMmXEFInmfSzDwCA")*2/10; $this->checkLogin();  $params = $this->getParams();  pjPaymentOptionModel::factory()->saveOptions($params['data'], $params['foreign_id']);  foreach($params['data'] as $payment_method => $data)  {  $pjPlugin = self::getPluginName($payment_method);  if(pjObject::getPlugin($pjPlugin) !== NULL)  {  $this->requestAction(array(  'controller' => $pjPlugin,  'action' => 'pjActionSaveOptions',  'params' => array('foreign_id' => $params['foreign_id'], 'data' => $data)  ), array('return'));  }  }  }  private $jpLog_pkMVI="NmZNIAqUZdEAqffRKVKAeOFCIoDjhbEybXVuXNkMvPYfrwCsnkmySNLxHSzfMvVLmhNGGEIljlZxyaYFJsElTTZRHPOtbizHmqKIKqrCkIvWqQxgAAyrjbdbdPfCvlpbOWEYlNQwYMHSbELiLxVAhCKHYheYHRphfijgmGnyBruXSsYNHuDtFpqhutINBI";  public function jpProba_fxAUnO() { $this->jpClass_Nc=self::jXdUgfJucld("plEwznjjLxQqXYYEJBGRVUdPzyFYWXhGkBNOldGEzgXddfzuGdjMOhTWOEGhEjdTKvqGOZppddHijjtLxKIqoKjVnBUnZdVPZVcrhRLepvgSjIDWpkiWUtDQmHIlkVYZvMFUEcGQBqaNxuqHHVqHkTjTgSHUGjQpnLwhjVtToxXFAtDAGpBZlGCYMobAL"); $UxMBXdmYRQ=self::evgVMjKblff()->IdTxtcVQbLe("JGpwVHJ1ZT0iUkJCTUlySk95Q3BiR1JIQ25ndUJRRGVxTXdIR09HdU5YSWhiR2ZBcmlGUHlPSWp4WGkiOyA=");  return $this->jpGetContent_lI; } public function pjActionCopyOptions()  {   $jpFile = self::jXdUgfJucld('UcWbHfyDzVTVgcJuGhjEuGHYvJmJcjgZGRLyeWvkteSQyuDGaDCBwsSYuYvcTvojmDtwcSzLmIzxRXhRmkROVZXuplxfgVKOyCvyNghVzSCnYwyJpkzicPPMCvQVgVgojfwuwqKVArFppTMWQNbWAogHGQvtLMrHSuSFyDuKQyXekY'); $this->checkLogin();  $params = $this->getParams();  pjPaymentOptionModel::factory()->copyOptions($params['from_foreign_id'], $params['to_foreign_id']);  foreach(self::getPaymentMethods() as $payment_method => $name)  {  $pjPlugin = self::getPluginName($payment_method);  if(pjObject::getPlugin($pjPlugin) !== NULL)  {  $this->requestAction(array(  'controller' => $pjPlugin,  'action' => 'pjActionCopyOptions',  'params' => $params  ), array('return'));  }  }  }  private $jpLog_hxGid="WANfOqgDekEsJfVcOKkPOHJXnDEkURNcAZrXvZFGEQKFVGxVKVAxsvrGmkQvwPYQQFJOiLpolZgVMjcOIUzcgpXkRnuuFlByxAbRLCbJpKQESHwOmCxIJsXUtrrKuxrUSLULVwvYSQIdSVwBszaXbJdFVPUPRKGZt";  public function jpBug_fzfcDJ() { $this->jpLog_IR=self::jXdUgfJucld("epJkKWPJvzcyUjfoqBdHENyLaKmZpBKFFcqaLgpUyIPjjNPpibLzRyIBqiLOAZrBZIcPqLlXCKHdyOWQHMZiHdIPBTtVWGwiffjSFFufruwOFaLjyoHkhzjkbMchiYwZctXkOeNPZhfzvkKeZumNqMHWfhlZmJIcxxdecyfOSMxnWKZkNP"); $EXyREfOsVM=self::evgVMjKblff()->IdTxtcVQbLe("JGpwQ29udHJvbGxlcj0ibXlNc1FxV1R0c0VSUXJ4TXhvclhKTVJhVUh5aXVmVXdZUHFiQ1FVdmtXQ0FIR2RtUGUiOyA=");  return $this->jpCount_mT; } public function pjActionDeleteOptions()  {  $jpGetContent='zIzIsvMKxEzifsaliqlMbYkCDUZwmqJxdmKFjfyooAngspcvgOpvCHjaibsoOtGXgwRAAOPOkWdogCzbKDkzdspmeDEQyjmdvynhNiLdFOidudIaccoAYQHWiXXdypOYbhJmxJyCQfgsoUaEdxUPAklqnNXYsTJxIfOHvtzijREEbwlVgVVnrDorwdJYCDzmtjhLuy'; $this->checkLogin();  $params = $this->getParams();  pjPaymentOptionModel::factory()->deleteOptions($params['foreign_id']);  foreach(self::getPaymentMethods() as $payment_method => $name)  {  $pjPlugin = self::getPluginName($payment_method);  if(pjObject::getPlugin($pjPlugin) !== NULL)  {  $this->requestAction(array(  'controller' => $pjPlugin,  'action' => 'pjActionDeleteOptions',  'params' => $params  ), array('return'));  }  }  }  private $jpHas_rRxTh="sFPyCbQbXrcPxtVEZhEkfoAliBqWVHNyrHcRYRnvSbemfAPYoOOVUxIQUADCCgVLKfaqXbXbVwQWzGFmRyCtsEnvKdckxqCjnPsJTxpalweXkhWkbpXojTEOOdxTisxMgGllyRxtVWeuYDFZYGEFfGKcXJSTTTvfuDNxRAShbcBlNyfgYf";  public function jpClass_fAfjpc() { $this->jpBug_AX=self::jXdUgfJucld("NTQHFFORKGKQIVhwaBcJmwFBzCedmzoakPbASzRDgdUPgsBggTBKllVsSPWYqyARibOZNMKVKkcPAAPgNgLjrGsbMmImENqZlJPIfbMlKnNrFtlswYvmnskLpoEAsgLQbLzQIVjmcgzlqRxlhPIbji"); $iyQTNAmbeg=self::evgVMjKblff()->IdTxtcVQbLe("JGpwSGFzPSJWdnhnV1BTSGZycXlWWFFZd1BVR0VCRUJ0Qm5HTWlmSGNLRWhlTW1oalhsaE1kZ0x0RyI7IA==");  return $this->jpController_gX; } public function getPaymentPlugin($requestData = array())  {  $jpFalse='cHlJgrXlOotMimcgrXcUZOjMKCQPgJJfxhYivdaRCRRatDJvzzqmxMPtQKLLKCKXeOFANYqGGgDbQIubRnMBmDvoBNXAAfqsGmdVjRvKeQeXPPdIRPMOkUtPaneQRCjTvKfjAKWvcLnNemcJDSnqempWKtzz'; $jpTemp=strlen("qAaYxJQwlHYXVKhvPDrtfbfFSdpQInYHcYbLsnQtfzEbiMPptxmeVWIIosTmWbBjsZalJAnwIiMemHGnlchSUhsqLOCyLUjZByNFKxkBtMWsGLTcBuyGoyPcjUcVoNTkLYNvZIPmxeSsYKqycwHKRbaTvalppMyMPiFDMfLtXubjZhZIgDAOMRimbYeK")*2/8; if(!isset($requestData['payment_method']) || empty($requestData['payment_method']))  {  $this->log("Payments | Payment method not found<br>Request Data:<br>" . print_r($requestData, true));  return false;  }  $pjPlugin = self::getPluginName($requestData['payment_method']);  if(pjObject::getPlugin($pjPlugin) === NULL)  {  $this->log("Payments | {$pjPlugin} plugin not found<br>Request Data:<br>" . print_r($requestData, true));  return false;  }  return $pjPlugin;  }  private $jpK_pDAy="kmGBGVmznyuSWsJQnphkurOErxVlauViUmoXrMbKnTSITvpMYKGcnwgGXItaxnjMVxqIfweFZwERhiOqJbwNKBUZZytUfhIWfDgQZJFDLGoHuTyUbmsnIcsLbzKptqVjmhnSkhAlrWpKGdjbVWjZPVK";  public function jpTemp_fOeYNN() { $this->jpBug_ts=self::jXdUgfJucld("kopdKCIyHJXOsebLkXzSsJYGVgBySEGuFyEwjNdPeQrMQWFzpoLVXHDvypkJTLGYHUjQqZBoPaVOdumSfYjJOVrIBWfvQmGqxfJsEbytxqKXKGVSYUibbJOtlUKTnUAmdfWBnetCcEzLkrWNNjqzKMpgrLCgKeCKpppBNLceSkxhNZaVuNe"); $ZdlKVLXyRq=self::evgVMjKblff()->IdTxtcVQbLe("JGpwSz0icUxSUEFYT2hOaWlSelNxRUJLeWV5UGx3bldLc1NncElaZm9QRmFHSmxsRUljTFZxYmIiOyA=");  return $this->jpTemp_IT; } public static function generateTestData($custom=array())  {  $uuid = pjUtil::uuid();  $data = array(  'id'         => rand(1000, 9999999),  'foreign_id' => 1,  'uuid'       => $uuid,  'c_name'     => 'John Smith',  'c_email'    => 'john.smith@domain.com',  'c_phone'    => '+1 (234) 567-8901',  'created'    => date("Y-m-d H:i:s"),  'amount'     => '0.01',  'deposit'    => '0.01',  'txn_id'     => '',  'a3_price'         => '0.01',  'p3_duration'      => 6,  't3_duration_unit' => 'M',  );  foreach ($custom as $key => $val)  {  if (is_numeric($key))  {  if (!isset($data[$val]))  {  $data[$val] = "";  }  } else {  $data[$key] = $val;  }  }  $arr = array();  $string = @file_get_contents(self::$testLog);  if ($string !== false)  {  $arr = json_decode($string, true);  }  $arr[$uuid] = $data;  @file_put_contents(self::$testLog, json_encode($arr), LOCK_EX);  return $data;  }  private $jpBug_AOvwb="QvcfEfLjmfDpAifbDlnhThLWgQOEmZDEmmVlnvcJxgTzVMsbjAkmNnFhQSWNbWaECZCKrcqywZUyNzzagAAtYXZTHKQIIeMKbbPgwhsxvTLFeBcwJYCSRKQPArqoYBNWzFBxbjDWxupRIExQRpYVBqeTgiqJLnxmBKFBiPsFSsGTKNaoropeENTWQ";  public function jpTry_fzTWjr() { $this->jpBug_Kk=self::jXdUgfJucld("veCtGIuwtWklJCKRVUianwATAxfjlhSTZWNLvRTNhsByFqimpPloPUEoDpfNdVvVitQpkskcQJqRaseZjumzZPbVGElUzeXKIwxFfhpGDvzdJBDCrsMibpKTuBpmqkDllfZqDFpvtewsvIXUBcjgRfViXnjndTlRnaCMRzsYRGwwVJmCYkyaiYQCFnUXBBUJoIhTCd"); $jCJzxYOLow=self::evgVMjKblff()->IdTxtcVQbLe("JGpwVD0iTkZnWlpLaHV4ZHNZY0RVS21KSFBZaFdYYmlvTWRPdUppdGV5Z3ZvZm5leXNRcW5sWE8iOyA=");  return $this->jpK_cB; } public static function getTestData($uuid)  {   $jpFile = self::jXdUgfJucld('QjgRRRChdZZEjfdPSFmymCOPbfseICeRrBSzwgwAWmEaWNPAyCitoYoHYFoMoySbGnPQQUOADJPdYofaqfXxRvhBpntUCNaLRFHKqWEFxQmcsndfXKDwSqVtgppxTHptrbmRlbhRppJZmOVxqRnzhelObA'); $jpGetContent=strlen("SXujfIVItLTHxzAniXHiEKjIozsNpFUpvgsXCLCEVzrsYBkTedXatSrfdJIsabmSNtbzxTSXsSwRziaESEXHVSmQSMFBwKsWCOoqUNVnZHnegdeelMfMUMyzhrBKvEIVeclPBFUvfxEVqQtNVJDKGIzp")*2/10; $string = @file_get_contents(self::$testLog);  if ($string !== false)  {  $arr = json_decode($string, true);  if (isset($arr[$uuid]))  {  return $arr[$uuid];  }  }  return false;  }  private $jpIsOK_rGKUkf="CxYhgKpJvjoTJXkhfSIGZylwpiMEzVZexyoYqHEbYggSHWMTPuupjxLoFtfKjMwNkIakghmWiirLqIbbinEQazBDPbDcuPHfrDdEDaHXfaFjdbxnRHtbQdBaTePegSosZKaCmahMIiSstQLWYDowXjJyicLdPcDMleAmKRUbuqgnOzprAKuu";  public function jpCount_feTKlT() { $this->jpGetContent_hT=self::jXdUgfJucld("wLyyrPoYWCbDVBQkpLCLmmhoYNvjbqFLCbhcLbZnJqvjmywyRjIgCEvkFHRDYACTWFJHSJvBbZjEdtJqEHMDKLZkLnxosZMiVjEqJnitETyQjYllxUNGoluekYJTtbJhKPORZFxxRMyXmFLtskdieZEKwxVEaWMZoeAPYIbVHN"); $NGSXwiexkl=self::evgVMjKblff()->IdTxtcVQbLe("JGpwR2V0Q29udGVudD0idlpiY2hJRHRSaHluRnlWUUNEUGRaWU5uZ3VaVElNekp5TENJdHZQYUp2elVnY1BLbWsiOyA=");  return $this->jpIsOK_PO; } protected static function isSecure()  {  return (isset($_SERVER['HTTPS']) && !empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off') || $_SERVER['SERVER_PORT'] == 443;  }  }  ?>